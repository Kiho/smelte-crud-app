import{S as e,i as t,s as n,H as s,b as i,r as o,h as l,u as r,f as a,j as c,A as u,y as d,z as f,F as m,K as h,L as g,m as p,k as $,M as v,e as w,n as b,a as _,p as y,q as k,t as x,g as M,d as L,C as I,G as B,B as N,J as R,R as C,c as P,I as j,O as z,l as q,x as T,Y as S}from"./chunk-8f4d86be.js";import{g as O,h as D,M as H,i as E,C as F,j as A,s as V,I as G,P as J,F as K,m as U,k as Y,l as Q,n as W,o as X,D as Z,B as ee,p as te}from"./chunk-e12f7c4e.js";import{_ as ne,a as se}from"./chunk-3259a9e2.js";function ie(e){var t,n=re(e.source,e.settings.field);return{c(){t=d(n)},m(e,n){i(e,t,n)},p(e,s){(e.source||e.settings)&&n!==(n=re(s.source,s.settings.field))&&f(t,n)},i:m,o:m,d(e){e&&c(t)}}}function oe(e){var t,n,u;function d(n){e.switch_instance_value_binding.call(null,n),t=!0,v(()=>t=!1)}var f=e.fieldtype;function m(e){let t={label:e.settings.label};return void 0!==e.source[e.settings.field]&&(t.value=e.source[e.settings.field]),{props:t}}if(f){var w=new f(m(e));h.push(()=>g(w,"value",d)),w.$on("change",e.change_handler),w.$on("click",e.click_handler),w.$on("keydown",e.keydown_handler),w.$on("focus",e.focus_handler)}return{c(){w&&w.$$.fragment.c(),n=s()},m(e,t){w&&p(w,e,t),i(e,n,t),u=!0},p(e,s){var i={};if(e.settings&&(i.label=s.settings.label),(!t&&e.source||e.settings)&&(i.value=s.source[s.settings.field]),f!==(f=s.fieldtype)){if(w){o();const e=w;l(e.$$.fragment,1,0,()=>{$(e,1)}),r()}f?(w=new f(m(s)),h.push(()=>g(w,"value",d)),w.$on("change",s.change_handler),w.$on("click",s.click_handler),w.$on("keydown",s.keydown_handler),w.$on("focus",s.focus_handler),w.$$.fragment.c(),a(w.$$.fragment,1),p(w,n.parentNode,n)):w=null}else f&&w.$set(i)},i(e){u||(w&&a(w.$$.fragment,e),u=!0)},o(e){w&&l(w.$$.fragment,e),u=!1},d(e){e&&c(n),w&&$(w,e)}}}function le(e){var t,n,u,d,f=[oe,ie],m=[];function h(e){return e.edit||e.settings.action?0:1}return t=h(e),n=m[t]=f[t](e),{c(){n.c(),u=s()},m(e,n){m[t].m(e,n),i(e,u,n),d=!0},p(e,s){var i=t;(t=h(s))===i?m[t].p(e,s):(o(),l(m[i],1,1,()=>{m[i]=null}),r(),(n=m[t])||(n=m[t]=f[t](s)).c(),a(n,1),n.m(u.parentNode,u))},i(e){d||(a(n),d=!0)},o(e){l(n),d=!1},d(e){m[t].d(e),e&&c(u)}}}function re(e,t){return"function"==typeof t?t(e):"string"==typeof t?e[t]:void 0}function ae(e,t,n){let{settings:s,edit:i,source:o={},fieldtype:l}=t;return e.$set=(e=>{"settings"in e&&n("settings",s=e.settings),"edit"in e&&n("edit",i=e.edit),"source"in e&&n("source",o=e.source),"fieldtype"in e&&n("fieldtype",l=e.fieldtype)}),e.$$.update=((e={settings:1})=>{if(e.settings){let e=O;if(s.component)switch(s.component.toLowerCase()){case"text":e=O;break;case"number":e=D;break;case"date":e=H;break;case"select":e=E;break;case"checkbox":e=F;break;case"action":e=A}n("fieldtype",l=e)}}),{settings:s,edit:i,source:o,fieldtype:l,change_handler:function(t){u(e,t)},click_handler:function(t){u(e,t)},keydown_handler:function(t){u(e,t)},focus_handler:function(t){u(e,t)},switch_instance_value_binding:function(e){o[s.field]=e,n("source",o)}}}class ce extends e{constructor(e){super(),t(this,e,ae,le,n,["settings","edit","source","fieldtype"])}}function ue(e,t,n){const s=Object.create(e);return s.column=t[n],s.j=n,s}function de(e,t,n){const s=Object.create(e);return s.row=t[n],s.each_value=t,s.i=n,s}const fe=()=>({}),me=()=>({});function he(e,t,n){const s=Object.create(e);return s.column=t[n],s.i=n,s}function ge(e){var t,n,s=new G({props:{small:!0,color:"text-gray-400",$$slots:{default:[pe]},$$scope:{ctx:e}}});return{c(){t=w("span"),s.$$.fragment.c(),_(t,"class","sort svelte-1b0gqhw"),x(t,"asc",!e.asc&&e.sortBy===e.column)},m(e,o){i(e,t,o),p(s,t,null),n=!0},p(e,n){var i={};e.$$scope&&(i.$$scope={changed:e,ctx:n}),s.$set(i),(e.asc||e.sortBy||e.columns)&&x(t,"asc",!n.asc&&n.sortBy===n.column)},i(e){n||(a(s.$$.fragment,e),n=!0)},o(e){l(s.$$.fragment,e),n=!1},d(e){e&&c(t),$(s)}}}function pe(e){var t;return{c(){t=d("arrow_downward")},m(e,n){i(e,t,n)},d(e){e&&c(t)}}}function $e(e){var t,n,s,u,m,h,g,p,$=e.column.label||e.column.field;const v=e.$$slots.header,x=P(v,e,me);var I=!1!==e.column.sortable&&ge(e);function B(){return e.click_handler(e)}return{c(){x||(t=w("th"),n=w("div"),I&&I.c(),s=b(),u=w("span"),m=d($),h=b()),x&&x.c(),x||(_(n,"class","sort-wrapper svelte-1b0gqhw"),_(t,"class","capitalize svelte-1b0gqhw"),g=y(t,"click",B))},l(e){x&&x.l(e)},m(e,o){x?x.m(e,o):(i(e,t,o),k(t,n),I&&I.m(n,null),k(n,s),k(n,u),k(u,m),i(e,h,o)),p=!0},p(t,i){e=i,x||(!1!==e.column.sortable?I?(I.p(t,e),a(I,1)):((I=ge(e)).c(),a(I,1),I.m(n,s)):I&&(o(),l(I,1,1,()=>{I=null}),r()),p&&!t.columns||$===($=e.column.label||e.column.field)||f(m,$)),x&&x.p&&t.$$scope&&x.p(M(v,e,t,fe),L(v,e,me))},i(e){p||(a(I),a(x,e),p=!0)},o(e){l(I),l(x,e),p=!1},d(e){x||(e&&c(t),I&&I.d(),e&&c(h),g()),x&&x.d(e)}}}function ve(e){var t,n,s,o=new J({});return{c(){t=w("div"),o.$$.fragment.c(),_(t,"class","absolute w-full")},m(e,n){i(e,t,n),p(o,t,null),s=!0},i(e){s||(a(o.$$.fragment,e),I(()=>{n||(n=B(t,V,{},!0)),n.run(1)}),s=!0)},o(e){l(o.$$.fragment,e),n||(n=B(t,V,{},!1)),n.run(0),s=!1},d(e){e&&c(t),$(o),e&&n&&n.end()}}}function we(e){var t,n,s,o;function r(t){e.datacol_source_binding.call(null,t,e),n=!0,v(()=>n=!1)}let u={edit:e.edit,settings:ye(e.column,e.i,e.j)};void 0!==e.row&&(u.source=e.row);var d=new ce({props:u});return h.push(()=>g(d,"source",r)),d.$on("change",e.change_handler),d.$on("click",function(...t){return e.click_handler_1(e,...t)}),d.$on("keydown",e.arrow),d.$on("focus",function(){return e.focus_handler(e)}),{c(){t=w("td"),d.$$.fragment.c(),_(t,"class",s=(e.column.class||"")+" "+(!e.edit&&e.column.action||e.edit?"nopadding":"")+" "+(e.column.numeric?"numeric":"")+" "+(e.column.truncate?" truncate":"")+" svelte-1b0gqhw"),N(t,"width",e.column.width?e.column.width:"auto")},m(e,n){i(e,t,n),p(d,t,null),o=!0},p(i,l){e=l;var r={};i.edit&&(r.edit=e.edit),(i.setRowCol||i.columns)&&(r.settings=ye(e.column,e.i,e.j)),!n&&i.rows&&(r.source=e.row),d.$set(r),o&&!i.columns&&!i.edit||s===(s=(e.column.class||"")+" "+(!e.edit&&e.column.action||e.edit?"nopadding":"")+" "+(e.column.numeric?"numeric":"")+" "+(e.column.truncate?" truncate":"")+" svelte-1b0gqhw")||_(t,"class",s),o&&!i.columns||N(t,"width",e.column.width?e.column.width:"auto")},i(e){o||(a(d.$$.fragment,e),o=!0)},o(e){l(d.$$.fragment,e),o=!1},d(e){e&&c(t),$(d)}}}function be(e){for(var t,n,s,u=e.columns,d=[],f=0;f<u.length;f+=1)d[f]=we(ue(e,u,f));const m=e=>l(d[e],1,1,()=>{d[e]=null});return{c(){t=w("tr");for(var e=0;e<d.length;e+=1)d[e].c();n=b(),_(t,"class","svelte-1b0gqhw")},m(e,o){i(e,t,o);for(var l=0;l<d.length;l+=1)d[l].m(t,null);k(t,n),s=!0},p(e,s){if(e.columns||e.edit||e.setRowCol||e.rows){u=s.columns;for(var i=0;i<u.length;i+=1){const o=ue(s,u,i);d[i]?(d[i].p(e,o),a(d[i],1)):(d[i]=we(o),d[i].c(),a(d[i],1),d[i].m(t,n))}for(o(),i=u.length;i<d.length;i+=1)m(i);r()}},i(e){if(!s){for(var t=0;t<u.length;t+=1)a(d[t]);s=!0}},o(e){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)l(d[e]);s=!1},d(e){e&&c(t),R(d,e)}}}function _e(e){for(var t,n,s,u,d,f,m,h=e.columns,g=[],p=0;p<h.length;p+=1)g[p]=$e(he(e,h,p));const $=e=>l(g[e],1,1,()=>{g[e]=null});var v=e.loading&&!e.hideProgress&&ve(),y=e.rows,x=[];for(p=0;p<y.length;p+=1)x[p]=be(de(e,y,p));const M=e=>l(x[e],1,1,()=>{x[e]=null});return{c(){t=w("table"),n=w("thead"),s=w("tr");for(var i=0;i<g.length;i+=1)g[i].c();u=b(),v&&v.c(),d=b(),f=w("tbody");for(i=0;i<x.length;i+=1)x[i].c();_(s,"class","svelte-1b0gqhw"),_(n,"class","items-center"),_(t,"class",e.wrapperClasses)},m(e,o){i(e,t,o),k(t,n),k(n,s);for(var l=0;l<g.length;l+=1)g[l].m(s,null);k(t,u),v&&v.m(t,null),k(t,d),k(t,f);for(l=0;l<x.length;l+=1)x[l].m(f,null);m=!0},p(e,n){if(e.columns||e.asc||e.sortBy||e.$$scope){h=n.columns;for(var i=0;i<h.length;i+=1){const t=he(n,h,i);g[i]?(g[i].p(e,t),a(g[i],1)):(g[i]=$e(t),g[i].c(),a(g[i],1),g[i].m(s,null))}for(o(),i=h.length;i<g.length;i+=1)$(i);r()}if(n.loading&&!n.hideProgress?v?a(v,1):((v=ve()).c(),a(v,1),v.m(t,d)):v&&(o(),l(v,1,1,()=>{v=null}),r()),e.columns||e.edit||e.setRowCol||e.rows){y=n.rows;for(i=0;i<y.length;i+=1){const t=de(n,y,i);x[i]?(x[i].p(e,t),a(x[i],1)):(x[i]=be(t),x[i].c(),a(x[i],1),x[i].m(f,null))}for(o(),i=y.length;i<x.length;i+=1)M(i);r()}m&&!e.wrapperClasses||_(t,"class",n.wrapperClasses)},i(e){if(!m){for(var t=0;t<h.length;t+=1)a(g[t]);a(v);for(t=0;t<y.length;t+=1)a(x[t]);m=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)l(g[e]);l(v),x=x.filter(Boolean);for(let e=0;e<x.length;e+=1)l(x[e]);m=!1},d(e){e&&c(t),R(g,e),v&&v.d(),R(x,e)}}}function ye(e,t,n){return e.dataset={row:t,col:n},e}function ke(e,t,n){const s=j();let{edit:i=!0,columns:o=[],rows:l=[],selected:r=null,loading:a=!1,hideProgress:c=!1,wrapperClasses:u="rounded elevation-3 relative text-sm overflow-x-auto"}=t;C(()=>{});let{asc:d=!1}=t,f=null;let m,{$$slots:h={},$$scope:g}=t;return e.$set=(e=>{"edit"in e&&n("edit",i=e.edit),"columns"in e&&n("columns",o=e.columns),"rows"in e&&n("rows",l=e.rows),"selected"in e&&n("selected",r=e.selected),"loading"in e&&n("loading",a=e.loading),"hideProgress"in e&&n("hideProgress",c=e.hideProgress),"wrapperClasses"in e&&n("wrapperClasses",u=e.wrapperClasses),"asc"in e&&n("asc",d=e.asc),"$$scope"in e&&n("$$scope",g=e.$$scope)}),e.$$.update=((e={sortBy:1})=>{e.sortBy&&(m=function(e){if(!e)return l;if(e.sort)return e.sort(l);const t=l.sort((t,n)=>{const s=e.value?e.value(t):t[e.field],i=e.value?e.value(n):n[e.field],o=d?s:i,l=d?i:s;return"number"==typeof s?o-l:(""+o).localeCompare(l)});return console.log(t),t}(f))}),{dispatch:s,edit:i,columns:o,rows:l,selected:r,loading:a,hideProgress:c,wrapperClasses:u,arrow:function(e){const{target:t,keyCode:s}=e;if(s<37||s>40)return;let i=+t.dataset.row,a=+t.dataset.col;37===s&&(a=Math.max(0,a-1)),39===s&&(a=Math.min(a+1,o.length-1)),38===s&&(i=Math.max(0,i-1)),40===s&&(i=Math.min(i+1,l.length-1)),n("selected",r=[i,a])},asc:d,sortBy:f,click_handler:function({column:e}){!1!==e.sortable&&(n("asc",d=f===e&&!d),n("sortBy",f=e))},datacol_source_binding:function(e,{row:t,each_value:s,i:i}){s[i]=e,n("rows",l)},change_handler:function(e){return s("update",{event:e})},click_handler_1:function({row:e,column:t},n){return function(e,t,n){e&&e.preventDefault(),n&&n(t)}(n,e,t.action)},focus_handler:function({i:e,j:t}){const s=r=[e,t];return n("selected",r),s},$$slots:h,$$scope:g}}class xe extends e{constructor(e){super(),t(this,e,ke,_e,n,["edit","columns","rows","selected","loading","hideProgress","wrapperClasses","asc"])}}function Me(e){var t,n;function s(n){e.field_value_binding.call(null,n),t=!0,v(()=>t=!1)}let i={settings:e.settings,withSettings:!0,fieldtype:e.fieldtype};void 0!==e.value&&(i.value=e.value);var o=new K({props:i});return h.push(()=>g(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};e.settings&&(s.settings=n.settings),e.fieldtype&&(s.fieldtype=n.fieldtype),!t&&e.value&&(s.value=n.value),o.$set(s)},i(e){n||(a(o.$$.fragment,e),n=!0)},o(e){l(o.$$.fragment,e),n=!1},d(e){$(o,e)}}}function Le(e,t,n){let{settings:s=null,component:i=null,value:o="",uuid:l=U()}=t,r=t;z(()=>{console.log("FormField",r)});let{fieldlabel:a}=t,{fieldtype:c}=t;return e.$set=(e=>{n("$$props",t=q(q({},t),e)),"settings"in e&&n("settings",s=e.settings),"component"in e&&n("component",i=e.component),"value"in e&&n("value",o=e.value),"uuid"in e&&n("uuid",l=e.uuid),"fieldlabel"in e&&n("fieldlabel",a=e.fieldlabel),"fieldtype"in e&&n("fieldtype",c=e.fieldtype)}),e.$$.update=((e={settings:1,component:1})=>{if(e.settings&&n("fieldlabel",a=s?s.label:""),e.component){let e=Y;if(i)switch(i.toLowerCase()){case"currency":e=Q;break;case"masked":e=H;break;case"number":e=D;break;case"select":e=W}n("fieldtype",c=e)}}),{settings:s,component:i,value:o,uuid:l,fieldlabel:a,fieldtype:c,field_value_binding:function(e){n("value",o=e)},$$props:t=T(t)}}class Ie extends e{constructor(e){super(),t(this,e,Le,Me,n,["settings","component","value","uuid","fieldlabel","fieldtype"])}}function Be(e){var t,n=e.source[e.field];return{c(){t=d(n)},m(e,n){i(e,t,n)},p(e,s){(e.source||e.field)&&n!==(n=s.source[s.field])&&f(t,n)},i:m,o:m,d(e){e&&c(t)}}}function Ne(e){var t,n;function s(n){e.formfield_value_binding.call(null,n),t=!0,v(()=>t=!1)}let i={settings:e.fieldProps,component:e.component};void 0!==e.source[e.field]&&(i.value=e.source[e.field]);var o=new Ie({props:i});return h.push(()=>g(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};e.fieldProps&&(s.settings=n.fieldProps),e.component&&(s.component=n.component),(!t&&e.source||e.field)&&(s.value=n.source[n.field]),o.$set(s)},i(e){n||(a(o.$$.fragment,e),n=!0)},o(e){l(o.$$.fragment,e),n=!1},d(e){$(o,e)}}}function Re(e){var t,n,s,u,d=[Ne,Be],f=[];function m(e){return e.edit?0:e.displayable?1:-1}return~(n=m(e))&&(s=f[n]=d[n](e)),{c(){t=w("div"),s&&s.c(),_(t,"class",e.classes)},m(e,s){i(e,t,s),~n&&f[n].m(t,null),u=!0},p(e,i){var c=n;(n=m(i))===c?~n&&f[n].p(e,i):(s&&(o(),l(f[c],1,1,()=>{f[c]=null}),r()),~n?((s=f[n])||(s=f[n]=d[n](i)).c(),a(s,1),s.m(t,null)):s=null),u&&!e.classes||_(t,"class",i.classes)},i(e){u||(a(s),u=!0)},o(e){l(s),u=!1},d(e){e&&c(t),~n&&f[n].d()}}}function Ce(e,t,n){let s,i,o,l,{settings:r={},source:a={},edit:c,classes:u}=t;return e.$set=(e=>{"settings"in e&&n("settings",r=e.settings),"source"in e&&n("source",a=e.source),"edit"in e&&n("edit",c=e.edit),"classes"in e&&n("classes",u=e.classes)}),e.$$.update=((e={settings:1,source:1,field:1})=>{if(e.settings&&r.col){let e=r.col.split(" ");e=e.filter(e=>e&&e.trim()).map(e=>"col-"+e),n("classes",u=e.join(" ").trim())}e.settings&&n("field",s=r.field),e.settings&&n("component",i=r.component),(e.source||e.field)&&n("displayable",o=a&&a.hasOwnProperty(s)&&null!=a[s]),e.settings&&n("fieldProps",l=X(r,"field","component","row","col","settings","withSettings","fieldtype"))}),{settings:r,source:a,edit:c,classes:u,field:s,component:i,displayable:o,fieldProps:l,formfield_value_binding:function(e){a[s]=e,n("source",a)}}}class Pe extends e{constructor(e){super(),t(this,e,Ce,Re,n,["settings","source","edit","classes"])}}function je(e,t,n){const s=Object.create(e);return s.col=t[n],s}function ze(e,t,n){const s=Object.create(e);return s.row=t[n],s}function qe(e){var t,n,s=e.row.subtitle;return{c(){t=w("div"),n=d(s),_(t,"class","row subtitle svelte-zafge4")},m(e,s){i(e,t,s),k(t,n)},p(e,t){e.fieldRows&&s!==(s=t.row.subtitle)&&f(n,s)},d(e){e&&c(t)}}}function Te(e){var t,n;function s(n){e.formcol_source_binding.call(null,n),t=!0,v(()=>t=!1)}let i={settings:e.col,edit:e.edit};void 0!==e.item&&(i.source=e.item);var o=new Pe({props:i});return h.push(()=>g(o,"source",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};e.fieldRows&&(s.settings=n.col),e.edit&&(s.edit=n.edit),!t&&e.item&&(s.source=n.item),o.$set(s)},i(e){n||(a(o.$$.fragment,e),n=!0)},o(e){l(o.$$.fragment,e),n=!1},d(e){$(o,e)}}}function Se(e){for(var t,n,s,u,d,f=e.row.subtitle&&qe(e),m=e.row.columns,h=[],g=0;g<m.length;g+=1)h[g]=Te(je(e,m,g));const p=e=>l(h[e],1,1,()=>{h[e]=null});return{c(){f&&f.c(),t=b(),n=w("div");for(var i=0;i<h.length;i+=1)h[i].c();s=b(),_(n,"class",u="row "+e.className+" svelte-zafge4")},m(e,o){f&&f.m(e,o),i(e,t,o),i(e,n,o);for(var l=0;l<h.length;l+=1)h[l].m(n,null);k(n,s),d=!0},p(e,i){if(i.row.subtitle?f?f.p(e,i):((f=qe(i)).c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),e.fieldRows||e.edit||e.item){m=i.row.columns;for(var l=0;l<m.length;l+=1){const t=je(i,m,l);h[l]?(h[l].p(e,t),a(h[l],1)):(h[l]=Te(t),h[l].c(),a(h[l],1),h[l].m(n,s))}for(o(),l=m.length;l<h.length;l+=1)p(l);r()}d&&!e.className||u===(u="row "+i.className+" svelte-zafge4")||_(n,"class",u)},i(e){if(!d){for(var t=0;t<m.length;t+=1)a(h[t]);d=!0}},o(e){h=h.filter(Boolean);for(let e=0;e<h.length;e+=1)l(h[e]);d=!1},d(e){f&&f.d(e),e&&(c(t),c(n)),R(h,e)}}}function Oe(e){for(var t,n,s=e.fieldRows,u=[],d=0;d<s.length;d+=1)u[d]=Se(ze(e,s,d));const f=e=>l(u[e],1,1,()=>{u[e]=null});return{c(){t=w("form");for(var e=0;e<u.length;e+=1)u[e].c();_(t,"class","form-horizontal")},m(s,o){i(s,t,o);for(var l=0;l<u.length;l+=1)u[l].m(t,null);e.form_1_binding(t),n=!0},p(e,n){if(e.className||e.fieldRows||e.edit||e.item){s=n.fieldRows;for(var i=0;i<s.length;i+=1){const o=ze(n,s,i);u[i]?(u[i].p(e,o),a(u[i],1)):(u[i]=Se(o),u[i].c(),a(u[i],1),u[i].m(t,null))}for(o(),i=s.length;i<u.length;i+=1)f(i);r()}},i(e){if(!n){for(var t=0;t<s.length;t+=1)a(u[t]);n=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)l(u[e]);n=!1},d(n){n&&c(t),R(u,n),e.form_1_binding(null)}}}function De(e,t,n){let{form:s=null,item:i={},columns:o=[],className:l="",edit:r=!0,fieldRows:a}=t;return e.$set=(e=>{"form"in e&&n("form",s=e.form),"item"in e&&n("item",i=e.item),"columns"in e&&n("columns",o=e.columns),"className"in e&&n("className",l=e.className),"edit"in e&&n("edit",r=e.edit),"fieldRows"in e&&n("fieldRows",a=e.fieldRows)}),e.$$.update=((e={columns:1})=>{if(e.columns){const e=Math.max.apply(Math,o.map(e=>e.row)),t=[];for(let n=0;n<=e;n++)t.push({columns:[]});o.forEach(e=>{const n=t[e.row];n&&n.columns&&(n.columns.push(e),e.subtitle&&(n.subtitle=e.subtitle))}),console.log("computed - rows",t),n("fieldRows",a=t)}}),{form:s,item:i,columns:o,className:l,edit:r,fieldRows:a,formcol_source_binding:function(e){n("item",i=e)},form_1_binding:function(e){h[e?"unshift":"push"](()=>{n("form",s=e)})}}}class He extends e{constructor(e){super(),t(this,e,De,Oe,n,["form","item","columns","className","edit","fieldRows"])}}function Ee(e){var t;return{c(){t=w("h5"),_(t,"slot","title")},m(n,s){i(n,t,s),t.innerHTML=e.formTitle},p(e,n){e.formTitle&&(t.innerHTML=n.formTitle)},d(e){e&&c(t)}}}function Fe(e){var t;return{c(){t=d("Close")},m(e,n){i(e,t,n)},d(e){e&&c(t)}}}function Ae(e){var t;return{c(){t=d("Save Changes")},m(e,n){i(e,t,n)},d(e){e&&c(t)}}}function Ve(e){var t,n,s,o=new ee({props:{$$slots:{default:[Fe]},$$scope:{ctx:e}}});o.$on("click",e.click_handler);var r=new ee({props:{$$slots:{default:[Ae]},$$scope:{ctx:e}}});return r.$on("click",e.click_handler_1),{c(){t=w("div"),o.$$.fragment.c(),n=b(),r.$$.fragment.c(),_(t,"slot","actions")},m(e,l){i(e,t,l),p(o,t,null),k(t,n),p(r,t,null),s=!0},p(e,t){var n={};e.$$scope&&(n.$$scope={changed:e,ctx:t}),o.$set(n);var s={};e.$$scope&&(s.$$scope={changed:e,ctx:t}),r.$set(s)},i(e){s||(a(o.$$.fragment,e),a(r.$$.fragment,e),s=!0)},o(e){l(o.$$.fragment,e),l(r.$$.fragment,e),s=!1},d(e){e&&c(t),$(o),$(r)}}}function Ge(e){var t,n,s,o;const r=e.$$slots.default,u=P(r,e,null);return{c(){t=b(),n=w("div"),u&&u.c(),s=b(),_(n,"class","tall-dialog svelte-15r4t6p")},l(e){u&&u.l(div_nodes)},m(e,l){i(e,t,l),i(e,n,l),u&&u.m(n,null),i(e,s,l),o=!0},p(e,t){u&&u.p&&e.$$scope&&u.p(M(r,t,e,null),L(r,t,null))},i(e){o||(a(u,e),o=!0)},o(e){l(u,e),o=!1},d(e){e&&(c(t),c(n)),u&&u.d(e),e&&c(s)}}}function Je(e){var t,n;function s(n){e.dialog_value_binding.call(null,n),t=!0,v(()=>t=!1)}let i={$$slots:{default:[Ge],actions:[Ve],title:[Ee]},$$scope:{ctx:e}};void 0!==e.showModal&&(i.value=e.showModal);var o=new Z({props:i});return h.push(()=>g(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};(e.$$scope||e.formTitle)&&(s.$$scope={changed:e,ctx:n}),!t&&e.showModal&&(s.value=n.showModal),o.$set(s)},i(e){n||(a(o.$$.fragment,e),n=!0)},o(e){l(o.$$.fragment,e),n=!1},d(e){$(o,e)}}}function Ke(e,t,n){let{showModal:s=!1}=t;const i=j();let o,{modalSize:l="default",title:r=""}=t,{$$slots:a={},$$scope:c}=t;return e.$set=(e=>{"showModal"in e&&n("showModal",s=e.showModal),"modalSize"in e&&n("modalSize",l=e.modalSize),"title"in e&&n("title",r=e.title),"$$scope"in e&&n("$$scope",c=e.$$scope)}),e.$$.update=((e={title:1})=>{e.title&&n("formTitle",o=r||"&nbsp")}),{showModal:s,dispatch:i,modalSize:l,title:r,formTitle:o,click_handler:function(){return i("close")},click_handler_1:function(){return i("save")},dialog_value_binding:function(e){n("showModal",s=e)},$$slots:a,$$scope:c}}class Ue extends e{constructor(e){super(),t(this,e,Ke,Je,n,["showModal","modalSize","title"])}}var Ye=function(){function e(){}return e.makeRequest=function(e,t,n,s){return ne(this,void 0,void 0,function(){var i,o,l;return se(this,function(r){switch(r.label){case 0:return i={mode:"cors",method:t,headers:n},s&&(i.body=JSON.stringify(s)),[4,fetch("https://safe-springs-35306.herokuapp.com/"+e,i)];case 1:return o=r.sent(),(l=o.headers.get("content-type"))&&-1!==l.indexOf("application/json")?[2,o.json()]:[2,o.text()]}})})},e.makeHeaders=function(){var e=new Headers;return e.append("Content-Type","application/json"),e},e.get=function(t){return ne(this,void 0,void 0,function(){var n=this;return se(this,function(s){return[2,new Promise(function(s,i){return ne(n,void 0,void 0,function(){var n,o,l;return se(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.makeHeaders(),[4,e.makeRequest(t,"GET",n)];case 1:return o=r.sent(),s(o),[3,3];case 2:return l=r.sent(),i(l),[3,3];case 3:return[2]}})})})]})})},e.post=function(t,n){return ne(this,void 0,void 0,function(){var s=this;return se(this,function(i){return[2,new Promise(function(i,o){return ne(s,void 0,void 0,function(){var s,l,r;return se(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),s=e.makeHeaders(),[4,e.makeRequest(t,"POST",s,n)];case 1:return l=a.sent(),i(l),[3,3];case 2:return r=a.sent(),o(r),[3,3];case 3:return[2]}})})})]})})},e.put=function(t,n){return ne(this,void 0,void 0,function(){var s=this;return se(this,function(i){return[2,new Promise(function(i,o){return ne(s,void 0,void 0,function(){var s,l,r;return se(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),s=e.makeHeaders(),[4,e.makeRequest(t,"PUT",s,n)];case 1:return l=a.sent(),i(l),[3,3];case 2:return r=a.sent(),o(r),[3,3];case 3:return[2]}})})})]})})},e.delete=function(t){return ne(this,void 0,void 0,function(){var n=this;return se(this,function(s){return[2,new Promise(function(s,i){return ne(n,void 0,void 0,function(){var n,o,l;return se(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.makeHeaders(),[4,e.makeRequest(t,"DELETE",n)];case 1:return o=r.sent(),s(o),[3,3];case 2:return l=r.sent(),i(l),[3,3];case 3:return[2]}})})})]})})},e}(),Qe=function(){function e(){}return e.getListByName=function(t,n){return ne(this,void 0,void 0,function(){var s,i,o;return se(this,function(l){switch(l.label){case 0:s=e.setLoading(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.getList(n)];case 2:return i=l.sent(),s(),[2,i];case 3:return o=l.sent(),console.error("getListByName:",o),[3,4];case 4:return[2,null]}})})},e.getList=function(e){return ne(this,void 0,void 0,function(){return se(this,function(t){return[2,Ye.get("api/"+e)]})})},e.save=function(e,t){return ne(this,void 0,void 0,function(){return se(this,function(n){return t.id?[2,Ye.put("api/"+e,t)]:[2,Ye.post("api/"+e,t)]})})},e.remove=function(e,t){return ne(this,void 0,void 0,function(){return se(this,function(n){return[2,Ye.delete("api/"+e+"/"+t)]})})},e.setLoading=function(e){var t=Date.now();return e.$set({loading:!0}),function(){Date.now()-t<500?setTimeout(function(){e.$set({loading:!1})},500):e.$set({loading:!1})}},e}(),We={getListByName:function(e){return ne(this,void 0,void 0,function(){return se(this,function(t){return[2,Qe.getListByName(this,e)]})})},getList:function(){return ne(this,void 0,void 0,function(){var e;return se(this,function(t){switch(t.label){case 0:return[4,this.getListByName(this.path)];case 1:return e=t.sent(),this.$set({list:e}),[2]}})})},add:function(e){e&&e.preventDefault(),this.$set({showModal:!0,selectedItem:{}})},edit:function(e,t){t&&t.preventDefault(),this.$set({showModal:!0,selectedItem:Object.assign({},e)})},save:function(e,t){return ne(this,void 0,void 0,function(){return se(this,function(n){switch(n.label){case 0:return t&&t.preventDefault(),function(e){var t=e.checkValidity();if(!t)for(var n=0;n<e.length;n++){var s=e[n];s.checkValidity&&(s.checkValidity()||console.log(s.validationMessage),s.setError&&s.setError(s.validationMessage))}return t}(this.form.querySelector("form"))?[4,Qe.save(this.path,e)]:[2];case 1:return n.sent(),this.close(),this.getList(),[2]}})})},remove:function(e,t){return ne(this,void 0,void 0,function(){return se(this,function(n){switch(n.label){case 0:return t&&t.preventDefault(),e&&e.id?[4,te("Are you sure to delete this record?")]:[2];case 1:return n.sent()?[4,Qe.remove(this.path,e)]:[3,3];case 2:n.sent(),this.getList(),n.label=3;case 3:return[2]}})})},close:function(){this.$set({showModal:!1,selectedItem:null})}};function Xe(e){var t;return{c(){t=d("Add New")},m(e,n){i(e,t,n)},d(e){e&&c(t)}}}function Ze(e){var t,n;function s(n){e.formgrid_item_binding.call(null,n),t=!0,v(()=>t=!1)}let i={columns:e.fielddata};void 0!==e.selectedItem&&(i.item=e.selectedItem);var o=new He({props:i});return h.push(()=>g(o,"item",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};e.fielddata&&(s.columns=n.fielddata),!t&&e.selectedItem&&(s.item=n.selectedItem),o.$set(s)},i(e){n||(a(o.$$.fragment,e),n=!0)},o(e){l(o.$$.fragment,e),n=!1},d(e){$(o,e)}}}function et(e){var t,n,s,o,r,u,m,y,x,M,L,I,B,N;function R(t){e.datagrid_rows_binding.call(null,t),u=!0,v(()=>u=!1)}function C(t){e.datagrid_columns_binding.call(null,t),m=!0,v(()=>m=!1)}let P={edit:!1,loading:e.loading};void 0!==e.list&&(P.rows=e.list),void 0!==e.columndata&&(P.columns=e.columndata);var j=new xe({props:P});h.push(()=>g(j,"rows",R)),h.push(()=>g(j,"columns",C));var z=new ee({props:{$$slots:{default:[Xe]},$$scope:{ctx:e}}});function q(t){e.modal_showModal_binding.call(null,t),B=!0,v(()=>B=!1)}z.$on("click",e.add);let T={title:e.selectedItem?e.selectedItem.name:"",$$slots:{default:[Ze]},$$scope:{ctx:e}};void 0!==e.showModal&&(T.showModal=e.showModal);var S=new Ue({props:T});return h.push(()=>g(S,"showModal",q)),S.$on("close",e.close),S.$on("save",e.save_handler),{c(){t=w("div"),n=w("h4"),s=d(e.title),o=b(),r=w("div"),j.$$.fragment.c(),y=b(),x=w("div"),z.$$.fragment.c(),M=b(),L=w("div"),I=w("div"),S.$$.fragment.c(),_(n,"class","capitalize pb-8"),_(r,"class","py-2"),_(x,"class","py-2"),_(I,"class","form-group")},m(l,a){i(l,t,a),k(t,n),k(n,s),k(t,o),k(t,r),p(j,r,null),k(t,y),k(t,x),p(z,x,null),k(t,M),k(t,L),k(L,I),p(S,I,null),e.div2_binding(I),N=!0},p(e,t){N&&!e.title||f(s,t.title);var n={};e.loading&&(n.loading=t.loading),!u&&e.list&&(n.rows=t.list),!m&&e.columndata&&(n.columns=t.columndata),j.$set(n);var i={};e.$$scope&&(i.$$scope={changed:e,ctx:t}),z.$set(i);var o={};e.selectedItem&&(o.title=t.selectedItem?t.selectedItem.name:""),(e.$$scope||e.fielddata||e.selectedItem)&&(o.$$scope={changed:e,ctx:t}),!B&&e.showModal&&(o.showModal=t.showModal),S.$set(o)},i(e){N||(a(j.$$.fragment,e),a(z.$$.fragment,e),a(S.$$.fragment,e),N=!0)},o(e){l(j.$$.fragment,e),l(z.$$.fragment,e),l(S.$$.fragment,e),N=!1},d(n){n&&c(t),$(j),$(z),$(S),e.div2_binding(null)}}}function tt(e,t,n){let{title:s="",columndata:i=[],partial:o=null,instance:l=null,list:r=[],showModal:a=!1,selectedItem:c={},path:u="",fielddata:d=[],form:f=null,loading:m=!1}=t,g=!1;const p=Object.assign({},We);function $(e,t){p.save.call(l,e,t)}function v(){p.getList.call(l)}return e.$set=(e=>{"title"in e&&n("title",s=e.title),"columndata"in e&&n("columndata",i=e.columndata),"partial"in e&&n("partial",o=e.partial),"instance"in e&&n("instance",l=e.instance),"list"in e&&n("list",r=e.list),"showModal"in e&&n("showModal",a=e.showModal),"selectedItem"in e&&n("selectedItem",c=e.selectedItem),"path"in e&&n("path",u=e.path),"fielddata"in e&&n("fielddata",d=e.fielddata),"form"in e&&n("form",f=e.form),"loading"in e&&n("loading",m=e.loading)}),e.$$.update=((e={path:1,instance:1,initialized:1,partial:1})=>{(e.path||e.instance||e.initialized)&&u&&l&&(g||n("initialized",g=!0)),(e.initialized||e.partial||e.instance)&&g&&o.oncreate(l).then(v)}),{title:s,columndata:i,partial:o,instance:l,list:r,showModal:a,selectedItem:c,path:u,fielddata:d,form:f,loading:m,close:function(){p.close.call(l)},add:function(e){p.add.call(l,e)},save:$,remove:function(e,t){p.remove.call(l,e,t)},edit:function(e,t){p.edit.call(l,e,t)},getList:v,getListByName:function(e){return p.getListByName.call(l,e)},datagrid_rows_binding:function(e){n("list",r=e)},datagrid_columns_binding:function(e){n("columndata",i=e)},formgrid_item_binding:function(e){n("selectedItem",c=e)},modal_showModal_binding:function(e){n("showModal",a=e)},save_handler:function(e){return $(c,e)},div2_binding:function(e){h[e?"unshift":"push"](()=>{n("form",f=e)})}}}export default class extends e{constructor(e){super(),t(this,e,tt,et,n,["title","columndata","partial","instance","list","showModal","selectedItem","path","fielddata","form","loading","close","remove","edit","getList","getListByName"])}get title(){return this.$$.ctx.title}set title(e){this.$set({title:e}),S()}get columndata(){return this.$$.ctx.columndata}set columndata(e){this.$set({columndata:e}),S()}get partial(){return this.$$.ctx.partial}set partial(e){this.$set({partial:e}),S()}get instance(){return this.$$.ctx.instance}set instance(e){this.$set({instance:e}),S()}get list(){return this.$$.ctx.list}set list(e){this.$set({list:e}),S()}get showModal(){return this.$$.ctx.showModal}set showModal(e){this.$set({showModal:e}),S()}get selectedItem(){return this.$$.ctx.selectedItem}set selectedItem(e){this.$set({selectedItem:e}),S()}get path(){return this.$$.ctx.path}set path(e){this.$set({path:e}),S()}get fielddata(){return this.$$.ctx.fielddata}set fielddata(e){this.$set({fielddata:e}),S()}get form(){return this.$$.ctx.form}set form(e){this.$set({form:e}),S()}get loading(){return this.$$.ctx.loading}set loading(e){this.$set({loading:e}),S()}get close(){return this.$$.ctx.close}get remove(){return this.$$.ctx.remove}get edit(){return this.$$.ctx.edit}get getList(){return this.$$.ctx.getList}get getListByName(){return this.$$.ctx.getListByName}}
