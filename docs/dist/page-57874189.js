import{S as e,i as t,s as n,G as s,b as l,r as o,h as i,u as a,f as c,j as r,A as u,y as d,z as f,B as m,J as $,K as p,m as g,k as h,L as v,e as w,n as b,a as _,p as y,q as M,t as k,g as x,d as I,M as j,I as z,Q as R,c as B,H as N,N as L,l as S,x as C,V as O}from"./chunk-dd27efbb.js";import{g as T,h as P,M as D,i as V,C as A,j as E,I as F,F as H,m as q,k as G,l as J,n as K,o as Q,D as U,B as W}from"./chunk-197282fb.js";import"./chunk-3259a9e2.js";import{A as X}from"./chunk-5be9f9e5.js";function Y(e){var t,n=te(e.source,e.settings.field);return{c(){t=d(n)},m(e,n){l(e,t,n)},p(e,s){(e.source||e.settings)&&n!==(n=te(s.source,s.settings.field))&&f(t,n)},i:m,o:m,d(e){e&&r(t)}}}function Z(e){var t,n,u;function d(n){e.switch_instance_value_binding.call(null,n),t=!0,v(()=>t=!1)}var f=e.fieldtype;function m(e){let t={label:e.settings.label};return void 0!==e.source[e.settings.field]&&(t.value=e.source[e.settings.field]),{props:t}}if(f){var w=new f(m(e));$.push(()=>p(w,"value",d)),w.$on("change",e.change_handler),w.$on("click",e.click_handler),w.$on("keydown",e.keydown_handler),w.$on("focus",e.focus_handler)}return{c(){w&&w.$$.fragment.c(),n=s()},m(e,t){w&&g(w,e,t),l(e,n,t),u=!0},p(e,s){var l={};if(e.settings&&(l.label=s.settings.label),(!t&&e.source||e.settings)&&(l.value=s.source[s.settings.field]),f!==(f=s.fieldtype)){if(w){o();const e=w;i(e.$$.fragment,1,0,()=>{h(e,1)}),a()}f?(w=new f(m(s)),$.push(()=>p(w,"value",d)),w.$on("change",s.change_handler),w.$on("click",s.click_handler),w.$on("keydown",s.keydown_handler),w.$on("focus",s.focus_handler),w.$$.fragment.c(),c(w.$$.fragment,1),g(w,n.parentNode,n)):w=null}else f&&w.$set(l)},i(e){u||(w&&c(w.$$.fragment,e),u=!0)},o(e){w&&i(w.$$.fragment,e),u=!1},d(e){e&&r(n),w&&h(w,e)}}}function ee(e){var t,n,u,d,f=[Z,Y],m=[];function $(e){return e.edit||e.settings.action?0:1}return t=$(e),n=m[t]=f[t](e),{c(){n.c(),u=s()},m(e,n){m[t].m(e,n),l(e,u,n),d=!0},p(e,s){var l=t;(t=$(s))===l?m[t].p(e,s):(o(),i(m[l],1,1,()=>{m[l]=null}),a(),(n=m[t])||(n=m[t]=f[t](s)).c(),c(n,1),n.m(u.parentNode,u))},i(e){d||(c(n),d=!0)},o(e){i(n),d=!1},d(e){m[t].d(e),e&&r(u)}}}function te(e,t){return"function"==typeof t?t(e):"string"==typeof t?e[t]:void 0}function ne(e,t,n){let{settings:s,edit:l,source:o={},fieldtype:i}=t;return e.$set=(e=>{"settings"in e&&n("settings",s=e.settings),"edit"in e&&n("edit",l=e.edit),"source"in e&&n("source",o=e.source),"fieldtype"in e&&n("fieldtype",i=e.fieldtype)}),e.$$.update=((e={settings:1})=>{if(e.settings){let e=T;if(s.component)switch(s.component.toLowerCase()){case"text":e=T;break;case"number":e=P;break;case"date":e=D;break;case"select":e=V;break;case"checkbox":e=A;break;case"action":e=E}n("fieldtype",i=e)}}),{settings:s,edit:l,source:o,fieldtype:i,change_handler:function(t){u(e,t)},click_handler:function(t){u(e,t)},keydown_handler:function(t){u(e,t)},focus_handler:function(t){u(e,t)},switch_instance_value_binding:function(e){o[s.field]=e,n("source",o)}}}class se extends e{constructor(e){super(),t(this,e,ne,ee,n,["settings","edit","source","fieldtype"])}}function le(e,t,n){const s=Object.create(e);return s.column=t[n],s.j=n,s}function oe(e,t,n){const s=Object.create(e);return s.row=t[n],s.each_value=t,s.i=n,s}const ie=()=>({}),ae=()=>({});function ce(e,t,n){const s=Object.create(e);return s.column=t[n],s.i=n,s}function re(e){var t,n,s=new F({props:{small:!0,color:"text-gray-400",$$slots:{default:[ue]},$$scope:{ctx:e}}});return{c(){t=w("span"),s.$$.fragment.c(),_(t,"class","sort svelte-3gl6bb"),k(t,"asc",!e.asc&&e.sortBy===e.column)},m(e,o){l(e,t,o),g(s,t,null),n=!0},p(e,n){var l={};e.$$scope&&(l.$$scope={changed:e,ctx:n}),s.$set(l),(e.asc||e.sortBy||e.columns)&&k(t,"asc",!n.asc&&n.sortBy===n.column)},i(e){n||(c(s.$$.fragment,e),n=!0)},o(e){i(s.$$.fragment,e),n=!1},d(e){e&&r(t),h(s)}}}function ue(e){var t;return{c(){t=d("arrow_downward")},m(e,n){l(e,t,n)},d(e){e&&r(t)}}}function de(e){var t,n,s,u,m,$,p,g,h=e.column.label||e.column.field;const v=e.$$slots.header,k=B(v,e,ae);var j=!1!==e.column.sortable&&re(e);function z(){return e.click_handler(e)}return{c(){k||(t=w("th"),n=w("div"),j&&j.c(),s=b(),u=w("span"),m=d(h),$=b()),k&&k.c(),k||(_(n,"class","sort-wrapper svelte-3gl6bb"),_(t,"class","capitalize svelte-3gl6bb"),p=y(t,"click",z))},l(e){k&&k.l(e)},m(e,o){k?k.m(e,o):(l(e,t,o),M(t,n),j&&j.m(n,null),M(n,s),M(n,u),M(u,m),l(e,$,o)),g=!0},p(t,l){e=l,k||(!1!==e.column.sortable?j?(j.p(t,e),c(j,1)):((j=re(e)).c(),c(j,1),j.m(n,s)):j&&(o(),i(j,1,1,()=>{j=null}),a()),g&&!t.columns||h===(h=e.column.label||e.column.field)||f(m,h)),k&&k.p&&t.$$scope&&k.p(x(v,e,t,ie),I(v,e,ae))},i(e){g||(c(j),c(k,e),g=!0)},o(e){i(j),i(k,e),g=!1},d(e){k||(e&&r(t),j&&j.d(),e&&r($),p()),k&&k.d(e)}}}function fe(e){var t,n,s,o;function a(t){e.datacol_source_binding.call(null,t,e),n=!0,v(()=>n=!1)}let u={edit:e.edit,settings:pe(e.column,e.i,e.j)};void 0!==e.row&&(u.source=e.row);var d=new se({props:u});return $.push(()=>p(d,"source",a)),d.$on("change",e.change_handler),d.$on("click",function(...t){return e.click_handler_1(e,...t)}),d.$on("keydown",e.arrow),d.$on("focus",function(){return e.focus_handler(e)}),{c(){t=w("td"),d.$$.fragment.c(),_(t,"class",s=(e.column.class||"")+" "+(!e.edit&&e.column.action||e.edit?"nopadding":"")+" "+(e.column.numeric?"numeric":"")+" "+(e.column.truncate?" truncate":"")+" svelte-3gl6bb"),j(t,"width",e.column.width?e.column.width:"auto")},m(e,n){l(e,t,n),g(d,t,null),o=!0},p(l,i){e=i;var a={};l.edit&&(a.edit=e.edit),(l.setRowCol||l.columns)&&(a.settings=pe(e.column,e.i,e.j)),!n&&l.rows&&(a.source=e.row),d.$set(a),o&&!l.columns&&!l.edit||s===(s=(e.column.class||"")+" "+(!e.edit&&e.column.action||e.edit?"nopadding":"")+" "+(e.column.numeric?"numeric":"")+" "+(e.column.truncate?" truncate":"")+" svelte-3gl6bb")||_(t,"class",s),o&&!l.columns||j(t,"width",e.column.width?e.column.width:"auto")},i(e){o||(c(d.$$.fragment,e),o=!0)},o(e){i(d.$$.fragment,e),o=!1},d(e){e&&r(t),h(d)}}}function me(e){for(var t,n,s,u=e.columns,d=[],f=0;f<u.length;f+=1)d[f]=fe(le(e,u,f));const m=e=>i(d[e],1,1,()=>{d[e]=null});return{c(){t=w("tr");for(var e=0;e<d.length;e+=1)d[e].c();n=b(),_(t,"class","svelte-3gl6bb")},m(e,o){l(e,t,o);for(var i=0;i<d.length;i+=1)d[i].m(t,null);M(t,n),s=!0},p(e,s){if(e.columns||e.edit||e.setRowCol||e.rows){u=s.columns;for(var l=0;l<u.length;l+=1){const o=le(s,u,l);d[l]?(d[l].p(e,o),c(d[l],1)):(d[l]=fe(o),d[l].c(),c(d[l],1),d[l].m(t,n))}for(o(),l=u.length;l<d.length;l+=1)m(l);a()}},i(e){if(!s){for(var t=0;t<u.length;t+=1)c(d[t]);s=!0}},o(e){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)i(d[e]);s=!1},d(e){e&&r(t),z(d,e)}}}function $e(e){for(var t,n,s,u,d,f,m=e.columns,$=[],p=0;p<m.length;p+=1)$[p]=de(ce(e,m,p));const g=e=>i($[e],1,1,()=>{$[e]=null});var h=e.rows,v=[];for(p=0;p<h.length;p+=1)v[p]=me(oe(e,h,p));const y=e=>i(v[e],1,1,()=>{v[e]=null});return{c(){t=w("table"),n=w("thead"),s=w("tr");for(var e=0;e<$.length;e+=1)$[e].c();u=b(),d=w("tbody");for(e=0;e<v.length;e+=1)v[e].c();_(s,"class","svelte-3gl6bb"),_(n,"class","items-center"),_(t,"class","p-1 svelte-3gl6bb")},m(e,o){l(e,t,o),M(t,n),M(n,s);for(var i=0;i<$.length;i+=1)$[i].m(s,null);M(t,u),M(t,d);for(i=0;i<v.length;i+=1)v[i].m(d,null);f=!0},p(e,t){if(e.columns||e.asc||e.sortBy||e.$$scope){m=t.columns;for(var n=0;n<m.length;n+=1){const l=ce(t,m,n);$[n]?($[n].p(e,l),c($[n],1)):($[n]=de(l),$[n].c(),c($[n],1),$[n].m(s,null))}for(o(),n=m.length;n<$.length;n+=1)g(n);a()}if(e.columns||e.edit||e.setRowCol||e.rows){h=t.rows;for(n=0;n<h.length;n+=1){const s=oe(t,h,n);v[n]?(v[n].p(e,s),c(v[n],1)):(v[n]=me(s),v[n].c(),c(v[n],1),v[n].m(d,null))}for(o(),n=h.length;n<v.length;n+=1)y(n);a()}},i(e){if(!f){for(var t=0;t<m.length;t+=1)c($[t]);for(t=0;t<h.length;t+=1)c(v[t]);f=!0}},o(e){$=$.filter(Boolean);for(let e=0;e<$.length;e+=1)i($[e]);v=v.filter(Boolean);for(let e=0;e<v.length;e+=1)i(v[e]);f=!1},d(e){e&&r(t),z($,e),z(v,e)}}}function pe(e,t,n){return e.dataset={row:t,col:n},e}function ge(e,t,n){const s=N();let{edit:l=!0,columns:o=[],rows:i=[],selected:a=null}=t;R(()=>{});let{asc:c=!1}=t,r=null;let u,{$$slots:d={},$$scope:f}=t;return e.$set=(e=>{"edit"in e&&n("edit",l=e.edit),"columns"in e&&n("columns",o=e.columns),"rows"in e&&n("rows",i=e.rows),"selected"in e&&n("selected",a=e.selected),"asc"in e&&n("asc",c=e.asc),"$$scope"in e&&n("$$scope",f=e.$$scope)}),e.$$.update=((e={sortBy:1})=>{e.sortBy&&(u=function(e){if(!e)return i;if(e.sort)return e.sort(i);const t=i.sort((t,n)=>{const s=e.value?e.value(t):t[e.field],l=e.value?e.value(n):n[e.field],o=c?s:l,i=c?l:s;return"number"==typeof s?o-i:(""+o).localeCompare(i)});return console.log(t),t}(r))}),{dispatch:s,edit:l,columns:o,rows:i,selected:a,arrow:function(e){const{target:t,keyCode:s}=e;if(s<37||s>40)return;let l=+t.dataset.row,c=+t.dataset.col;37===s&&(c=Math.max(0,c-1)),39===s&&(c=Math.min(c+1,o.length-1)),38===s&&(l=Math.max(0,l-1)),40===s&&(l=Math.min(l+1,i.length-1)),n("selected",a=[l,c])},asc:c,sortBy:r,click_handler:function({column:e}){!1!==e.sortable&&(n("asc",c=r===e&&!c),n("sortBy",r=e))},datacol_source_binding:function(e,{row:t,each_value:s,i:l}){s[l]=e,n("rows",i)},change_handler:function(e){return s("update",{event:e})},click_handler_1:function({row:e,column:t},n){return function(e,t,n){e&&e.preventDefault(),n&&n(t)}(n,e,t.action)},focus_handler:function({i:e,j:t}){const s=a=[e,t];return n("selected",a),s},$$slots:d,$$scope:f}}class he extends e{constructor(e){super(),t(this,e,ge,$e,n,["edit","columns","rows","selected","asc"])}}function ve(e){var t,n;function s(n){e.field_value_binding.call(null,n),t=!0,v(()=>t=!1)}let l={settings:e.settings,withSettings:!0,fieldtype:e.fieldtype};void 0!==e.value&&(l.value=e.value);var o=new H({props:l});return $.push(()=>p(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){g(o,e,t),n=!0},p(e,n){var s={};e.settings&&(s.settings=n.settings),e.fieldtype&&(s.fieldtype=n.fieldtype),!t&&e.value&&(s.value=n.value),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function we(e,t,n){let{settings:s=null,component:l=null,value:o="",uuid:i=q()}=t,a=t;L(()=>{console.log("FormField",a)});let{fieldlabel:c}=t,{fieldtype:r}=t;return e.$set=(e=>{n("$$props",t=S(S({},t),e)),"settings"in e&&n("settings",s=e.settings),"component"in e&&n("component",l=e.component),"value"in e&&n("value",o=e.value),"uuid"in e&&n("uuid",i=e.uuid),"fieldlabel"in e&&n("fieldlabel",c=e.fieldlabel),"fieldtype"in e&&n("fieldtype",r=e.fieldtype)}),e.$$.update=((e={settings:1,component:1})=>{if(e.settings&&n("fieldlabel",c=s?s.label:""),e.component){let e=G;if(l)switch(l.toLowerCase()){case"currency":e=J;break;case"masked":e=D;break;case"number":e=P;break;case"select":e=K}n("fieldtype",r=e)}}),{settings:s,component:l,value:o,uuid:i,fieldlabel:c,fieldtype:r,field_value_binding:function(e){n("value",o=e)},$$props:t=C(t)}}class be extends e{constructor(e){super(),t(this,e,we,ve,n,["settings","component","value","uuid","fieldlabel","fieldtype"])}}function _e(e){var t,n=e.source[e.field];return{c(){t=d(n)},m(e,n){l(e,t,n)},p(e,s){(e.source||e.field)&&n!==(n=s.source[s.field])&&f(t,n)},i:m,o:m,d(e){e&&r(t)}}}function ye(e){var t,n;function s(n){e.formfield_value_binding.call(null,n),t=!0,v(()=>t=!1)}let l={settings:e.fieldProps,component:e.component};void 0!==e.source[e.field]&&(l.value=e.source[e.field]);var o=new be({props:l});return $.push(()=>p(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){g(o,e,t),n=!0},p(e,n){var s={};e.fieldProps&&(s.settings=n.fieldProps),e.component&&(s.component=n.component),(!t&&e.source||e.field)&&(s.value=n.source[n.field]),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Me(e){var t,n,s,u,d=[ye,_e],f=[];function m(e){return e.edit?0:e.displayable?1:-1}return~(n=m(e))&&(s=f[n]=d[n](e)),{c(){t=w("div"),s&&s.c(),_(t,"class",e.classes)},m(e,s){l(e,t,s),~n&&f[n].m(t,null),u=!0},p(e,l){var r=n;(n=m(l))===r?~n&&f[n].p(e,l):(s&&(o(),i(f[r],1,1,()=>{f[r]=null}),a()),~n?((s=f[n])||(s=f[n]=d[n](l)).c(),c(s,1),s.m(t,null)):s=null),u&&!e.classes||_(t,"class",l.classes)},i(e){u||(c(s),u=!0)},o(e){i(s),u=!1},d(e){e&&r(t),~n&&f[n].d()}}}function ke(e,t,n){let s,l,o,i,{settings:a={},source:c={},edit:r,classes:u}=t;return e.$set=(e=>{"settings"in e&&n("settings",a=e.settings),"source"in e&&n("source",c=e.source),"edit"in e&&n("edit",r=e.edit),"classes"in e&&n("classes",u=e.classes)}),e.$$.update=((e={settings:1,source:1,field:1})=>{if(e.settings&&a.col){let e=a.col.split(" ");e=e.filter(e=>e&&e.trim()).map(e=>"col-"+e),n("classes",u=e.join(" ").trim())}e.settings&&n("field",s=a.field),e.settings&&n("component",l=a.component),(e.source||e.field)&&n("displayable",o=c&&c.hasOwnProperty(s)&&null!=c[s]),e.settings&&n("fieldProps",i=Q(a,"field","component","row","col","settings","withSettings","fieldtype"))}),{settings:a,source:c,edit:r,classes:u,field:s,component:l,displayable:o,fieldProps:i,formfield_value_binding:function(e){c[s]=e,n("source",c)}}}class xe extends e{constructor(e){super(),t(this,e,ke,Me,n,["settings","source","edit","classes"])}}function Ie(e,t,n){const s=Object.create(e);return s.col=t[n],s}function je(e,t,n){const s=Object.create(e);return s.row=t[n],s}function ze(e){var t,n,s=e.row.subtitle;return{c(){t=w("div"),n=d(s),_(t,"class","row subtitle svelte-zafge4")},m(e,s){l(e,t,s),M(t,n)},p(e,t){e.fieldRows&&s!==(s=t.row.subtitle)&&f(n,s)},d(e){e&&r(t)}}}function Re(e){var t,n;function s(n){e.formcol_source_binding.call(null,n),t=!0,v(()=>t=!1)}let l={settings:e.col,edit:e.edit};void 0!==e.item&&(l.source=e.item);var o=new xe({props:l});return $.push(()=>p(o,"source",s)),{c(){o.$$.fragment.c()},m(e,t){g(o,e,t),n=!0},p(e,n){var s={};e.fieldRows&&(s.settings=n.col),e.edit&&(s.edit=n.edit),!t&&e.item&&(s.source=n.item),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Be(e){for(var t,n,s,u,d,f=e.row.subtitle&&ze(e),m=e.row.columns,$=[],p=0;p<m.length;p+=1)$[p]=Re(Ie(e,m,p));const g=e=>i($[e],1,1,()=>{$[e]=null});return{c(){f&&f.c(),t=b(),n=w("div");for(var l=0;l<$.length;l+=1)$[l].c();s=b(),_(n,"class",u="row "+e.className+" svelte-zafge4")},m(e,o){f&&f.m(e,o),l(e,t,o),l(e,n,o);for(var i=0;i<$.length;i+=1)$[i].m(n,null);M(n,s),d=!0},p(e,l){if(l.row.subtitle?f?f.p(e,l):((f=ze(l)).c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),e.fieldRows||e.edit||e.item){m=l.row.columns;for(var i=0;i<m.length;i+=1){const t=Ie(l,m,i);$[i]?($[i].p(e,t),c($[i],1)):($[i]=Re(t),$[i].c(),c($[i],1),$[i].m(n,s))}for(o(),i=m.length;i<$.length;i+=1)g(i);a()}d&&!e.className||u===(u="row "+l.className+" svelte-zafge4")||_(n,"class",u)},i(e){if(!d){for(var t=0;t<m.length;t+=1)c($[t]);d=!0}},o(e){$=$.filter(Boolean);for(let e=0;e<$.length;e+=1)i($[e]);d=!1},d(e){f&&f.d(e),e&&(r(t),r(n)),z($,e)}}}function Ne(e){for(var t,n,s=e.fieldRows,u=[],d=0;d<s.length;d+=1)u[d]=Be(je(e,s,d));const f=e=>i(u[e],1,1,()=>{u[e]=null});return{c(){t=w("form");for(var e=0;e<u.length;e+=1)u[e].c();_(t,"class","form-horizontal")},m(s,o){l(s,t,o);for(var i=0;i<u.length;i+=1)u[i].m(t,null);e.form_1_binding(t),n=!0},p(e,n){if(e.className||e.fieldRows||e.edit||e.item){s=n.fieldRows;for(var l=0;l<s.length;l+=1){const o=je(n,s,l);u[l]?(u[l].p(e,o),c(u[l],1)):(u[l]=Be(o),u[l].c(),c(u[l],1),u[l].m(t,null))}for(o(),l=s.length;l<u.length;l+=1)f(l);a()}},i(e){if(!n){for(var t=0;t<s.length;t+=1)c(u[t]);n=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)i(u[e]);n=!1},d(n){n&&r(t),z(u,n),e.form_1_binding(null)}}}function Le(e,t,n){let{form:s=null,item:l={},columns:o=[],className:i="",edit:a=!0,fieldRows:c}=t;return e.$set=(e=>{"form"in e&&n("form",s=e.form),"item"in e&&n("item",l=e.item),"columns"in e&&n("columns",o=e.columns),"className"in e&&n("className",i=e.className),"edit"in e&&n("edit",a=e.edit),"fieldRows"in e&&n("fieldRows",c=e.fieldRows)}),e.$$.update=((e={columns:1})=>{if(e.columns){const e=Math.max.apply(Math,o.map(e=>e.row)),t=[];for(let n=0;n<=e;n++)t.push({columns:[]});o.forEach(e=>{const n=t[e.row];n&&n.columns&&(n.columns.push(e),e.subtitle&&(n.subtitle=e.subtitle))}),console.log("computed - rows",t),n("fieldRows",c=t)}}),{form:s,item:l,columns:o,className:i,edit:a,fieldRows:c,formcol_source_binding:function(e){n("item",l=e)},form_1_binding:function(e){$[e?"unshift":"push"](()=>{n("form",s=e)})}}}class Se extends e{constructor(e){super(),t(this,e,Le,Ne,n,["form","item","columns","className","edit","fieldRows"])}}function Ce(e){var t;return{c(){t=w("h5"),_(t,"slot","title")},m(n,s){l(n,t,s),t.innerHTML=e.formTitle},p(e,n){e.formTitle&&(t.innerHTML=n.formTitle)},d(e){e&&r(t)}}}function Oe(e){var t;return{c(){t=d("Close")},m(e,n){l(e,t,n)},d(e){e&&r(t)}}}function Te(e){var t;return{c(){t=d("Save Changes")},m(e,n){l(e,t,n)},d(e){e&&r(t)}}}function Pe(e){var t,n,s,o=new W({props:{$$slots:{default:[Oe]},$$scope:{ctx:e}}});o.$on("click",e.click_handler);var a=new W({props:{$$slots:{default:[Te]},$$scope:{ctx:e}}});return a.$on("click",e.click_handler_1),{c(){t=w("div"),o.$$.fragment.c(),n=b(),a.$$.fragment.c(),_(t,"slot","actions")},m(e,i){l(e,t,i),g(o,t,null),M(t,n),g(a,t,null),s=!0},p(e,t){var n={};e.$$scope&&(n.$$scope={changed:e,ctx:t}),o.$set(n);var s={};e.$$scope&&(s.$$scope={changed:e,ctx:t}),a.$set(s)},i(e){s||(c(o.$$.fragment,e),c(a.$$.fragment,e),s=!0)},o(e){i(o.$$.fragment,e),i(a.$$.fragment,e),s=!1},d(e){e&&r(t),h(o),h(a)}}}function De(e){var t,n,s,o;const a=e.$$slots.default,u=B(a,e,null);return{c(){t=b(),n=w("div"),u&&u.c(),s=b(),_(n,"class","tall-dialog svelte-15r4t6p")},l(e){u&&u.l(div_nodes)},m(e,i){l(e,t,i),l(e,n,i),u&&u.m(n,null),l(e,s,i),o=!0},p(e,t){u&&u.p&&e.$$scope&&u.p(x(a,t,e,null),I(a,t,null))},i(e){o||(c(u,e),o=!0)},o(e){i(u,e),o=!1},d(e){e&&(r(t),r(n)),u&&u.d(e),e&&r(s)}}}function Ve(e){var t,n;function s(n){e.dialog_value_binding.call(null,n),t=!0,v(()=>t=!1)}let l={$$slots:{default:[De],actions:[Pe],title:[Ce]},$$scope:{ctx:e}};void 0!==e.showModal&&(l.value=e.showModal);var o=new U({props:l});return $.push(()=>p(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){g(o,e,t),n=!0},p(e,n){var s={};(e.$$scope||e.formTitle)&&(s.$$scope={changed:e,ctx:n}),!t&&e.showModal&&(s.value=n.showModal),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Ae(e,t,n){let{showModal:s=!1}=t;const l=N();let o,{modalSize:i="default",title:a=""}=t,{$$slots:c={},$$scope:r}=t;return e.$set=(e=>{"showModal"in e&&n("showModal",s=e.showModal),"modalSize"in e&&n("modalSize",i=e.modalSize),"title"in e&&n("title",a=e.title),"$$scope"in e&&n("$$scope",r=e.$$scope)}),e.$$.update=((e={title:1})=>{e.title&&n("formTitle",o=a||"&nbsp")}),{showModal:s,dispatch:l,modalSize:i,title:a,formTitle:o,click_handler:function(){return l("close")},click_handler_1:function(){return l("save")},dialog_value_binding:function(e){n("showModal",s=e)},$$slots:c,$$scope:r}}class Ee extends e{constructor(e){super(),t(this,e,Ae,Ve,n,["showModal","modalSize","title"])}}var Fe={getList:function(){var e=this;X.getList(this.path).then(function(t){e.$set({list:t})})},add:function(e){e&&e.preventDefault(),this.$set({showModal:!0,selectedItem:{}})},edit:function(e,t){t&&t.preventDefault(),this.$set({showModal:!0,selectedItem:Object.assign({},e)})},save:function(e,t){t&&t.preventDefault();var n=this;if(function(e){var t=e.checkValidity();if(!t)for(var n=0;n<e.length;n++){var s=e[n];s.checkValidity&&(s.checkValidity()||console.log(s.validationMessage),s.setError&&s.setError(s.validationMessage))}return t}(this.form.querySelector("form"))){X.save(this.path,e,function(e){n.close(),n.getList()})}},close:function(){this.$set({showModal:!1,selectedItem:null})}};function He(e){var t;return{c(){t=d("Add New")},m(e,n){l(e,t,n)},d(e){e&&r(t)}}}function qe(e){var t,n;function s(n){e.formgrid_item_binding.call(null,n),t=!0,v(()=>t=!1)}let l={columns:e.fielddata};void 0!==e.selectedItem&&(l.item=e.selectedItem);var o=new Se({props:l});return $.push(()=>p(o,"item",s)),{c(){o.$$.fragment.c()},m(e,t){g(o,e,t),n=!0},p(e,n){var s={};e.fielddata&&(s.columns=n.fielddata),!t&&e.selectedItem&&(s.item=n.selectedItem),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Ge(e){var t,n,s,o,a,u,m,y,k,x,I,j,z,R;function B(t){e.datagrid_rows_binding.call(null,t),u=!0,v(()=>u=!1)}function N(t){e.datagrid_columns_binding.call(null,t),m=!0,v(()=>m=!1)}let L={edit:!1};void 0!==e.list&&(L.rows=e.list),void 0!==e.columndata&&(L.columns=e.columndata);var S=new he({props:L});$.push(()=>p(S,"rows",B)),$.push(()=>p(S,"columns",N));var C=new W({props:{$$slots:{default:[He]},$$scope:{ctx:e}}});function O(t){e.modal_showModal_binding.call(null,t),z=!0,v(()=>z=!1)}C.$on("click",e.add);let T={title:e.selectedItem?e.selectedItem.name:"",$$slots:{default:[qe]},$$scope:{ctx:e}};void 0!==e.showModal&&(T.showModal=e.showModal);var P=new Ee({props:T});return $.push(()=>p(P,"showModal",O)),P.$on("close",e.close),P.$on("save",e.save_handler),{c(){t=w("div"),n=w("h4"),s=d(e.title),o=b(),a=w("div"),S.$$.fragment.c(),y=b(),k=w("div"),C.$$.fragment.c(),x=b(),I=w("div"),j=w("div"),P.$$.fragment.c(),_(n,"class","capitalize pb-8"),_(a,"class","py-2"),_(k,"class","py-2"),_(j,"class","form-group")},m(i,c){l(i,t,c),M(t,n),M(n,s),M(t,o),M(t,a),g(S,a,null),M(t,y),M(t,k),g(C,k,null),M(t,x),M(t,I),M(I,j),g(P,j,null),e.div2_binding(j),R=!0},p(e,t){R&&!e.title||f(s,t.title);var n={};!u&&e.list&&(n.rows=t.list),!m&&e.columndata&&(n.columns=t.columndata),S.$set(n);var l={};e.$$scope&&(l.$$scope={changed:e,ctx:t}),C.$set(l);var o={};e.selectedItem&&(o.title=t.selectedItem?t.selectedItem.name:""),(e.$$scope||e.fielddata||e.selectedItem)&&(o.$$scope={changed:e,ctx:t}),!z&&e.showModal&&(o.showModal=t.showModal),P.$set(o)},i(e){R||(c(S.$$.fragment,e),c(C.$$.fragment,e),c(P.$$.fragment,e),R=!0)},o(e){i(S.$$.fragment,e),i(C.$$.fragment,e),i(P.$$.fragment,e),R=!1},d(n){n&&r(t),h(S),h(C),h(P),e.div2_binding(null)}}}function Je(e,t,n){let{title:s="",columndata:l=[],partial:o=null,instance:i=null,list:a=[],showModal:c=!1,selectedItem:r={},path:u="",fielddata:d=[],form:f=null}=t,m=!1;const p=Object.assign({},Fe);function g(e,t){p.save.call(i,e,t)}function h(){p.getList.call(i)}return e.$set=(e=>{"title"in e&&n("title",s=e.title),"columndata"in e&&n("columndata",l=e.columndata),"partial"in e&&n("partial",o=e.partial),"instance"in e&&n("instance",i=e.instance),"list"in e&&n("list",a=e.list),"showModal"in e&&n("showModal",c=e.showModal),"selectedItem"in e&&n("selectedItem",r=e.selectedItem),"path"in e&&n("path",u=e.path),"fielddata"in e&&n("fielddata",d=e.fielddata),"form"in e&&n("form",f=e.form)}),e.$$.update=((e={path:1,instance:1,initialized:1,partial:1})=>{(e.path||e.instance||e.initialized)&&u&&i&&(m||n("initialized",m=!0)),(e.initialized||e.partial||e.instance)&&m&&o.oncreate(i).then(h)}),{title:s,columndata:l,partial:o,instance:i,list:a,showModal:c,selectedItem:r,path:u,fielddata:d,form:f,close:function(){p.close.call(i)},add:function(e){p.add.call(i,e)},save:g,edit:function(e,t){p.edit.call(i,e,t)},getList:h,datagrid_rows_binding:function(e){n("list",a=e)},datagrid_columns_binding:function(e){n("columndata",l=e)},formgrid_item_binding:function(e){n("selectedItem",r=e)},modal_showModal_binding:function(e){n("showModal",c=e)},save_handler:function(e){return g(r,e)},div2_binding:function(e){$[e?"unshift":"push"](()=>{n("form",f=e)})}}}export default class extends e{constructor(e){super(),t(this,e,Je,Ge,n,["title","columndata","partial","instance","list","showModal","selectedItem","path","fielddata","form","close","edit","getList"])}get title(){return this.$$.ctx.title}set title(e){this.$set({title:e}),O()}get columndata(){return this.$$.ctx.columndata}set columndata(e){this.$set({columndata:e}),O()}get partial(){return this.$$.ctx.partial}set partial(e){this.$set({partial:e}),O()}get instance(){return this.$$.ctx.instance}set instance(e){this.$set({instance:e}),O()}get list(){return this.$$.ctx.list}set list(e){this.$set({list:e}),O()}get showModal(){return this.$$.ctx.showModal}set showModal(e){this.$set({showModal:e}),O()}get selectedItem(){return this.$$.ctx.selectedItem}set selectedItem(e){this.$set({selectedItem:e}),O()}get path(){return this.$$.ctx.path}set path(e){this.$set({path:e}),O()}get fielddata(){return this.$$.ctx.fielddata}set fielddata(e){this.$set({fielddata:e}),O()}get form(){return this.$$.ctx.form}set form(e){this.$set({form:e}),O()}get close(){return this.$$.ctx.close}get edit(){return this.$$.ctx.edit}get getList(){return this.$$.ctx.getList}}
//# sourceMappingURL=page-57874189.js.map
