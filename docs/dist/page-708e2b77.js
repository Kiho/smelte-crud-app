import{S as e,i as t,s as n,G as s,b as l,r as o,h as i,u as a,f as c,j as r,A as u,y as d,z as f,B as m,J as $,K as g,m as p,k as h,L as v,e as w,n as b,a as _,p as y,q as M,t as k,g as x,d as I,C,F as j,M as z,I as R,Q as B,c as L,H as N,N as P,l as S,x as q,V as T}from"./chunk-dd27efbb.js";import{g as D,h as O,M as F,i as V,C as A,j as E,s as H,I as G,P as J,F as K,m as Q,k as U,l as W,n as X,o as Y,D as Z,B as ee}from"./chunk-94babd02.js";import{_ as te,a as ne}from"./chunk-3259a9e2.js";import{A as se}from"./chunk-e5d47c95.js";function le(e){var t,n=ae(e.source,e.settings.field);return{c(){t=d(n)},m(e,n){l(e,t,n)},p(e,s){(e.source||e.settings)&&n!==(n=ae(s.source,s.settings.field))&&f(t,n)},i:m,o:m,d(e){e&&r(t)}}}function oe(e){var t,n,u;function d(n){e.switch_instance_value_binding.call(null,n),t=!0,v(()=>t=!1)}var f=e.fieldtype;function m(e){let t={label:e.settings.label};return void 0!==e.source[e.settings.field]&&(t.value=e.source[e.settings.field]),{props:t}}if(f){var w=new f(m(e));$.push(()=>g(w,"value",d)),w.$on("change",e.change_handler),w.$on("click",e.click_handler),w.$on("keydown",e.keydown_handler),w.$on("focus",e.focus_handler)}return{c(){w&&w.$$.fragment.c(),n=s()},m(e,t){w&&p(w,e,t),l(e,n,t),u=!0},p(e,s){var l={};if(e.settings&&(l.label=s.settings.label),(!t&&e.source||e.settings)&&(l.value=s.source[s.settings.field]),f!==(f=s.fieldtype)){if(w){o();const e=w;i(e.$$.fragment,1,0,()=>{h(e,1)}),a()}f?(w=new f(m(s)),$.push(()=>g(w,"value",d)),w.$on("change",s.change_handler),w.$on("click",s.click_handler),w.$on("keydown",s.keydown_handler),w.$on("focus",s.focus_handler),w.$$.fragment.c(),c(w.$$.fragment,1),p(w,n.parentNode,n)):w=null}else f&&w.$set(l)},i(e){u||(w&&c(w.$$.fragment,e),u=!0)},o(e){w&&i(w.$$.fragment,e),u=!1},d(e){e&&r(n),w&&h(w,e)}}}function ie(e){var t,n,u,d,f=[oe,le],m=[];function $(e){return e.edit||e.settings.action?0:1}return t=$(e),n=m[t]=f[t](e),{c(){n.c(),u=s()},m(e,n){m[t].m(e,n),l(e,u,n),d=!0},p(e,s){var l=t;(t=$(s))===l?m[t].p(e,s):(o(),i(m[l],1,1,()=>{m[l]=null}),a(),(n=m[t])||(n=m[t]=f[t](s)).c(),c(n,1),n.m(u.parentNode,u))},i(e){d||(c(n),d=!0)},o(e){i(n),d=!1},d(e){m[t].d(e),e&&r(u)}}}function ae(e,t){return"function"==typeof t?t(e):"string"==typeof t?e[t]:void 0}function ce(e,t,n){let{settings:s,edit:l,source:o={},fieldtype:i}=t;return e.$set=(e=>{"settings"in e&&n("settings",s=e.settings),"edit"in e&&n("edit",l=e.edit),"source"in e&&n("source",o=e.source),"fieldtype"in e&&n("fieldtype",i=e.fieldtype)}),e.$$.update=((e={settings:1})=>{if(e.settings){let e=D;if(s.component)switch(s.component.toLowerCase()){case"text":e=D;break;case"number":e=O;break;case"date":e=F;break;case"select":e=V;break;case"checkbox":e=A;break;case"action":e=E}n("fieldtype",i=e)}}),{settings:s,edit:l,source:o,fieldtype:i,change_handler:function(t){u(e,t)},click_handler:function(t){u(e,t)},keydown_handler:function(t){u(e,t)},focus_handler:function(t){u(e,t)},switch_instance_value_binding:function(e){o[s.field]=e,n("source",o)}}}class re extends e{constructor(e){super(),t(this,e,ce,ie,n,["settings","edit","source","fieldtype"])}}function ue(e,t,n){const s=Object.create(e);return s.column=t[n],s.j=n,s}function de(e,t,n){const s=Object.create(e);return s.row=t[n],s.each_value=t,s.i=n,s}const fe=()=>({}),me=()=>({});function $e(e,t,n){const s=Object.create(e);return s.column=t[n],s.i=n,s}function ge(e){var t,n,s=new G({props:{small:!0,color:"text-gray-400",$$slots:{default:[pe]},$$scope:{ctx:e}}});return{c(){t=w("span"),s.$$.fragment.c(),_(t,"class","sort svelte-1b0gqhw"),k(t,"asc",!e.asc&&e.sortBy===e.column)},m(e,o){l(e,t,o),p(s,t,null),n=!0},p(e,n){var l={};e.$$scope&&(l.$$scope={changed:e,ctx:n}),s.$set(l),(e.asc||e.sortBy||e.columns)&&k(t,"asc",!n.asc&&n.sortBy===n.column)},i(e){n||(c(s.$$.fragment,e),n=!0)},o(e){i(s.$$.fragment,e),n=!1},d(e){e&&r(t),h(s)}}}function pe(e){var t;return{c(){t=d("arrow_downward")},m(e,n){l(e,t,n)},d(e){e&&r(t)}}}function he(e){var t,n,s,u,m,$,g,p,h=e.column.label||e.column.field;const v=e.$$slots.header,k=L(v,e,me);var C=!1!==e.column.sortable&&ge(e);function j(){return e.click_handler(e)}return{c(){k||(t=w("th"),n=w("div"),C&&C.c(),s=b(),u=w("span"),m=d(h),$=b()),k&&k.c(),k||(_(n,"class","sort-wrapper svelte-1b0gqhw"),_(t,"class","capitalize svelte-1b0gqhw"),g=y(t,"click",j))},l(e){k&&k.l(e)},m(e,o){k?k.m(e,o):(l(e,t,o),M(t,n),C&&C.m(n,null),M(n,s),M(n,u),M(u,m),l(e,$,o)),p=!0},p(t,l){e=l,k||(!1!==e.column.sortable?C?(C.p(t,e),c(C,1)):((C=ge(e)).c(),c(C,1),C.m(n,s)):C&&(o(),i(C,1,1,()=>{C=null}),a()),p&&!t.columns||h===(h=e.column.label||e.column.field)||f(m,h)),k&&k.p&&t.$$scope&&k.p(x(v,e,t,fe),I(v,e,me))},i(e){p||(c(C),c(k,e),p=!0)},o(e){i(C),i(k,e),p=!1},d(e){k||(e&&r(t),C&&C.d(),e&&r($),g()),k&&k.d(e)}}}function ve(e){var t,n,s,o=new J({});return{c(){t=w("div"),o.$$.fragment.c(),_(t,"class","absolute w-full")},m(e,n){l(e,t,n),p(o,t,null),s=!0},i(e){s||(c(o.$$.fragment,e),C(()=>{n||(n=j(t,H,{},!0)),n.run(1)}),s=!0)},o(e){i(o.$$.fragment,e),n||(n=j(t,H,{},!1)),n.run(0),s=!1},d(e){e&&r(t),h(o),e&&n&&n.end()}}}function we(e){var t,n,s,o;function a(t){e.datacol_source_binding.call(null,t,e),n=!0,v(()=>n=!1)}let u={edit:e.edit,settings:ye(e.column,e.i,e.j)};void 0!==e.row&&(u.source=e.row);var d=new re({props:u});return $.push(()=>g(d,"source",a)),d.$on("change",e.change_handler),d.$on("click",function(...t){return e.click_handler_1(e,...t)}),d.$on("keydown",e.arrow),d.$on("focus",function(){return e.focus_handler(e)}),{c(){t=w("td"),d.$$.fragment.c(),_(t,"class",s=(e.column.class||"")+" "+(!e.edit&&e.column.action||e.edit?"nopadding":"")+" "+(e.column.numeric?"numeric":"")+" "+(e.column.truncate?" truncate":"")+" svelte-1b0gqhw"),z(t,"width",e.column.width?e.column.width:"auto")},m(e,n){l(e,t,n),p(d,t,null),o=!0},p(l,i){e=i;var a={};l.edit&&(a.edit=e.edit),(l.setRowCol||l.columns)&&(a.settings=ye(e.column,e.i,e.j)),!n&&l.rows&&(a.source=e.row),d.$set(a),o&&!l.columns&&!l.edit||s===(s=(e.column.class||"")+" "+(!e.edit&&e.column.action||e.edit?"nopadding":"")+" "+(e.column.numeric?"numeric":"")+" "+(e.column.truncate?" truncate":"")+" svelte-1b0gqhw")||_(t,"class",s),o&&!l.columns||z(t,"width",e.column.width?e.column.width:"auto")},i(e){o||(c(d.$$.fragment,e),o=!0)},o(e){i(d.$$.fragment,e),o=!1},d(e){e&&r(t),h(d)}}}function be(e){for(var t,n,s,u=e.columns,d=[],f=0;f<u.length;f+=1)d[f]=we(ue(e,u,f));const m=e=>i(d[e],1,1,()=>{d[e]=null});return{c(){t=w("tr");for(var e=0;e<d.length;e+=1)d[e].c();n=b(),_(t,"class","svelte-1b0gqhw")},m(e,o){l(e,t,o);for(var i=0;i<d.length;i+=1)d[i].m(t,null);M(t,n),s=!0},p(e,s){if(e.columns||e.edit||e.setRowCol||e.rows){u=s.columns;for(var l=0;l<u.length;l+=1){const o=ue(s,u,l);d[l]?(d[l].p(e,o),c(d[l],1)):(d[l]=we(o),d[l].c(),c(d[l],1),d[l].m(t,n))}for(o(),l=u.length;l<d.length;l+=1)m(l);a()}},i(e){if(!s){for(var t=0;t<u.length;t+=1)c(d[t]);s=!0}},o(e){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)i(d[e]);s=!1},d(e){e&&r(t),R(d,e)}}}function _e(e){for(var t,n,s,u,d,f,m,$=e.columns,g=[],p=0;p<$.length;p+=1)g[p]=he($e(e,$,p));const h=e=>i(g[e],1,1,()=>{g[e]=null});var v=e.loading&&!e.hideProgress&&ve(),y=e.rows,k=[];for(p=0;p<y.length;p+=1)k[p]=be(de(e,y,p));const x=e=>i(k[e],1,1,()=>{k[e]=null});return{c(){t=w("table"),n=w("thead"),s=w("tr");for(var l=0;l<g.length;l+=1)g[l].c();u=b(),v&&v.c(),d=b(),f=w("tbody");for(l=0;l<k.length;l+=1)k[l].c();_(s,"class","svelte-1b0gqhw"),_(n,"class","items-center"),_(t,"class",e.wrapperClasses)},m(e,o){l(e,t,o),M(t,n),M(n,s);for(var i=0;i<g.length;i+=1)g[i].m(s,null);M(t,u),v&&v.m(t,null),M(t,d),M(t,f);for(i=0;i<k.length;i+=1)k[i].m(f,null);m=!0},p(e,n){if(e.columns||e.asc||e.sortBy||e.$$scope){$=n.columns;for(var l=0;l<$.length;l+=1){const t=$e(n,$,l);g[l]?(g[l].p(e,t),c(g[l],1)):(g[l]=he(t),g[l].c(),c(g[l],1),g[l].m(s,null))}for(o(),l=$.length;l<g.length;l+=1)h(l);a()}if(n.loading&&!n.hideProgress?v?c(v,1):((v=ve()).c(),c(v,1),v.m(t,d)):v&&(o(),i(v,1,1,()=>{v=null}),a()),e.columns||e.edit||e.setRowCol||e.rows){y=n.rows;for(l=0;l<y.length;l+=1){const t=de(n,y,l);k[l]?(k[l].p(e,t),c(k[l],1)):(k[l]=be(t),k[l].c(),c(k[l],1),k[l].m(f,null))}for(o(),l=y.length;l<k.length;l+=1)x(l);a()}m&&!e.wrapperClasses||_(t,"class",n.wrapperClasses)},i(e){if(!m){for(var t=0;t<$.length;t+=1)c(g[t]);c(v);for(t=0;t<y.length;t+=1)c(k[t]);m=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)i(g[e]);i(v),k=k.filter(Boolean);for(let e=0;e<k.length;e+=1)i(k[e]);m=!1},d(e){e&&r(t),R(g,e),v&&v.d(),R(k,e)}}}function ye(e,t,n){return e.dataset={row:t,col:n},e}function Me(e,t,n){const s=N();let{edit:l=!0,columns:o=[],rows:i=[],selected:a=null,loading:c=!1,hideProgress:r=!1,wrapperClasses:u="rounded elevation-3 relative text-sm overflow-x-auto"}=t;B(()=>{});let{asc:d=!1}=t,f=null;let m,{$$slots:$={},$$scope:g}=t;return e.$set=(e=>{"edit"in e&&n("edit",l=e.edit),"columns"in e&&n("columns",o=e.columns),"rows"in e&&n("rows",i=e.rows),"selected"in e&&n("selected",a=e.selected),"loading"in e&&n("loading",c=e.loading),"hideProgress"in e&&n("hideProgress",r=e.hideProgress),"wrapperClasses"in e&&n("wrapperClasses",u=e.wrapperClasses),"asc"in e&&n("asc",d=e.asc),"$$scope"in e&&n("$$scope",g=e.$$scope)}),e.$$.update=((e={sortBy:1})=>{e.sortBy&&(m=function(e){if(!e)return i;if(e.sort)return e.sort(i);const t=i.sort((t,n)=>{const s=e.value?e.value(t):t[e.field],l=e.value?e.value(n):n[e.field],o=d?s:l,i=d?l:s;return"number"==typeof s?o-i:(""+o).localeCompare(i)});return console.log(t),t}(f))}),{dispatch:s,edit:l,columns:o,rows:i,selected:a,loading:c,hideProgress:r,wrapperClasses:u,arrow:function(e){const{target:t,keyCode:s}=e;if(s<37||s>40)return;let l=+t.dataset.row,c=+t.dataset.col;37===s&&(c=Math.max(0,c-1)),39===s&&(c=Math.min(c+1,o.length-1)),38===s&&(l=Math.max(0,l-1)),40===s&&(l=Math.min(l+1,i.length-1)),n("selected",a=[l,c])},asc:d,sortBy:f,click_handler:function({column:e}){!1!==e.sortable&&(n("asc",d=f===e&&!d),n("sortBy",f=e))},datacol_source_binding:function(e,{row:t,each_value:s,i:l}){s[l]=e,n("rows",i)},change_handler:function(e){return s("update",{event:e})},click_handler_1:function({row:e,column:t},n){return function(e,t,n){e&&e.preventDefault(),n&&n(t)}(n,e,t.action)},focus_handler:function({i:e,j:t}){const s=a=[e,t];return n("selected",a),s},$$slots:$,$$scope:g}}class ke extends e{constructor(e){super(),t(this,e,Me,_e,n,["edit","columns","rows","selected","loading","hideProgress","wrapperClasses","asc"])}}function xe(e){var t,n;function s(n){e.field_value_binding.call(null,n),t=!0,v(()=>t=!1)}let l={settings:e.settings,withSettings:!0,fieldtype:e.fieldtype};void 0!==e.value&&(l.value=e.value);var o=new K({props:l});return $.push(()=>g(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};e.settings&&(s.settings=n.settings),e.fieldtype&&(s.fieldtype=n.fieldtype),!t&&e.value&&(s.value=n.value),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Ie(e,t,n){let{settings:s=null,component:l=null,value:o="",uuid:i=Q()}=t,a=t;P(()=>{console.log("FormField",a)});let{fieldlabel:c}=t,{fieldtype:r}=t;return e.$set=(e=>{n("$$props",t=S(S({},t),e)),"settings"in e&&n("settings",s=e.settings),"component"in e&&n("component",l=e.component),"value"in e&&n("value",o=e.value),"uuid"in e&&n("uuid",i=e.uuid),"fieldlabel"in e&&n("fieldlabel",c=e.fieldlabel),"fieldtype"in e&&n("fieldtype",r=e.fieldtype)}),e.$$.update=((e={settings:1,component:1})=>{if(e.settings&&n("fieldlabel",c=s?s.label:""),e.component){let e=U;if(l)switch(l.toLowerCase()){case"currency":e=W;break;case"masked":e=F;break;case"number":e=O;break;case"select":e=X}n("fieldtype",r=e)}}),{settings:s,component:l,value:o,uuid:i,fieldlabel:c,fieldtype:r,field_value_binding:function(e){n("value",o=e)},$$props:t=q(t)}}class Ce extends e{constructor(e){super(),t(this,e,Ie,xe,n,["settings","component","value","uuid","fieldlabel","fieldtype"])}}function je(e){var t,n=e.source[e.field];return{c(){t=d(n)},m(e,n){l(e,t,n)},p(e,s){(e.source||e.field)&&n!==(n=s.source[s.field])&&f(t,n)},i:m,o:m,d(e){e&&r(t)}}}function ze(e){var t,n;function s(n){e.formfield_value_binding.call(null,n),t=!0,v(()=>t=!1)}let l={settings:e.fieldProps,component:e.component};void 0!==e.source[e.field]&&(l.value=e.source[e.field]);var o=new Ce({props:l});return $.push(()=>g(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};e.fieldProps&&(s.settings=n.fieldProps),e.component&&(s.component=n.component),(!t&&e.source||e.field)&&(s.value=n.source[n.field]),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Re(e){var t,n,s,u,d=[ze,je],f=[];function m(e){return e.edit?0:e.displayable?1:-1}return~(n=m(e))&&(s=f[n]=d[n](e)),{c(){t=w("div"),s&&s.c(),_(t,"class",e.classes)},m(e,s){l(e,t,s),~n&&f[n].m(t,null),u=!0},p(e,l){var r=n;(n=m(l))===r?~n&&f[n].p(e,l):(s&&(o(),i(f[r],1,1,()=>{f[r]=null}),a()),~n?((s=f[n])||(s=f[n]=d[n](l)).c(),c(s,1),s.m(t,null)):s=null),u&&!e.classes||_(t,"class",l.classes)},i(e){u||(c(s),u=!0)},o(e){i(s),u=!1},d(e){e&&r(t),~n&&f[n].d()}}}function Be(e,t,n){let s,l,o,i,{settings:a={},source:c={},edit:r,classes:u}=t;return e.$set=(e=>{"settings"in e&&n("settings",a=e.settings),"source"in e&&n("source",c=e.source),"edit"in e&&n("edit",r=e.edit),"classes"in e&&n("classes",u=e.classes)}),e.$$.update=((e={settings:1,source:1,field:1})=>{if(e.settings&&a.col){let e=a.col.split(" ");e=e.filter(e=>e&&e.trim()).map(e=>"col-"+e),n("classes",u=e.join(" ").trim())}e.settings&&n("field",s=a.field),e.settings&&n("component",l=a.component),(e.source||e.field)&&n("displayable",o=c&&c.hasOwnProperty(s)&&null!=c[s]),e.settings&&n("fieldProps",i=Y(a,"field","component","row","col","settings","withSettings","fieldtype"))}),{settings:a,source:c,edit:r,classes:u,field:s,component:l,displayable:o,fieldProps:i,formfield_value_binding:function(e){c[s]=e,n("source",c)}}}class Le extends e{constructor(e){super(),t(this,e,Be,Re,n,["settings","source","edit","classes"])}}function Ne(e,t,n){const s=Object.create(e);return s.col=t[n],s}function Pe(e,t,n){const s=Object.create(e);return s.row=t[n],s}function Se(e){var t,n,s=e.row.subtitle;return{c(){t=w("div"),n=d(s),_(t,"class","row subtitle svelte-zafge4")},m(e,s){l(e,t,s),M(t,n)},p(e,t){e.fieldRows&&s!==(s=t.row.subtitle)&&f(n,s)},d(e){e&&r(t)}}}function qe(e){var t,n;function s(n){e.formcol_source_binding.call(null,n),t=!0,v(()=>t=!1)}let l={settings:e.col,edit:e.edit};void 0!==e.item&&(l.source=e.item);var o=new Le({props:l});return $.push(()=>g(o,"source",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};e.fieldRows&&(s.settings=n.col),e.edit&&(s.edit=n.edit),!t&&e.item&&(s.source=n.item),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Te(e){for(var t,n,s,u,d,f=e.row.subtitle&&Se(e),m=e.row.columns,$=[],g=0;g<m.length;g+=1)$[g]=qe(Ne(e,m,g));const p=e=>i($[e],1,1,()=>{$[e]=null});return{c(){f&&f.c(),t=b(),n=w("div");for(var l=0;l<$.length;l+=1)$[l].c();s=b(),_(n,"class",u="row "+e.className+" svelte-zafge4")},m(e,o){f&&f.m(e,o),l(e,t,o),l(e,n,o);for(var i=0;i<$.length;i+=1)$[i].m(n,null);M(n,s),d=!0},p(e,l){if(l.row.subtitle?f?f.p(e,l):((f=Se(l)).c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),e.fieldRows||e.edit||e.item){m=l.row.columns;for(var i=0;i<m.length;i+=1){const t=Ne(l,m,i);$[i]?($[i].p(e,t),c($[i],1)):($[i]=qe(t),$[i].c(),c($[i],1),$[i].m(n,s))}for(o(),i=m.length;i<$.length;i+=1)p(i);a()}d&&!e.className||u===(u="row "+l.className+" svelte-zafge4")||_(n,"class",u)},i(e){if(!d){for(var t=0;t<m.length;t+=1)c($[t]);d=!0}},o(e){$=$.filter(Boolean);for(let e=0;e<$.length;e+=1)i($[e]);d=!1},d(e){f&&f.d(e),e&&(r(t),r(n)),R($,e)}}}function De(e){for(var t,n,s=e.fieldRows,u=[],d=0;d<s.length;d+=1)u[d]=Te(Pe(e,s,d));const f=e=>i(u[e],1,1,()=>{u[e]=null});return{c(){t=w("form");for(var e=0;e<u.length;e+=1)u[e].c();_(t,"class","form-horizontal")},m(s,o){l(s,t,o);for(var i=0;i<u.length;i+=1)u[i].m(t,null);e.form_1_binding(t),n=!0},p(e,n){if(e.className||e.fieldRows||e.edit||e.item){s=n.fieldRows;for(var l=0;l<s.length;l+=1){const o=Pe(n,s,l);u[l]?(u[l].p(e,o),c(u[l],1)):(u[l]=Te(o),u[l].c(),c(u[l],1),u[l].m(t,null))}for(o(),l=s.length;l<u.length;l+=1)f(l);a()}},i(e){if(!n){for(var t=0;t<s.length;t+=1)c(u[t]);n=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)i(u[e]);n=!1},d(n){n&&r(t),R(u,n),e.form_1_binding(null)}}}function Oe(e,t,n){let{form:s=null,item:l={},columns:o=[],className:i="",edit:a=!0,fieldRows:c}=t;return e.$set=(e=>{"form"in e&&n("form",s=e.form),"item"in e&&n("item",l=e.item),"columns"in e&&n("columns",o=e.columns),"className"in e&&n("className",i=e.className),"edit"in e&&n("edit",a=e.edit),"fieldRows"in e&&n("fieldRows",c=e.fieldRows)}),e.$$.update=((e={columns:1})=>{if(e.columns){const e=Math.max.apply(Math,o.map(e=>e.row)),t=[];for(let n=0;n<=e;n++)t.push({columns:[]});o.forEach(e=>{const n=t[e.row];n&&n.columns&&(n.columns.push(e),e.subtitle&&(n.subtitle=e.subtitle))}),console.log("computed - rows",t),n("fieldRows",c=t)}}),{form:s,item:l,columns:o,className:i,edit:a,fieldRows:c,formcol_source_binding:function(e){n("item",l=e)},form_1_binding:function(e){$[e?"unshift":"push"](()=>{n("form",s=e)})}}}class Fe extends e{constructor(e){super(),t(this,e,Oe,De,n,["form","item","columns","className","edit","fieldRows"])}}function Ve(e){var t;return{c(){t=w("h5"),_(t,"slot","title")},m(n,s){l(n,t,s),t.innerHTML=e.formTitle},p(e,n){e.formTitle&&(t.innerHTML=n.formTitle)},d(e){e&&r(t)}}}function Ae(e){var t;return{c(){t=d("Close")},m(e,n){l(e,t,n)},d(e){e&&r(t)}}}function Ee(e){var t;return{c(){t=d("Save Changes")},m(e,n){l(e,t,n)},d(e){e&&r(t)}}}function He(e){var t,n,s,o=new ee({props:{$$slots:{default:[Ae]},$$scope:{ctx:e}}});o.$on("click",e.click_handler);var a=new ee({props:{$$slots:{default:[Ee]},$$scope:{ctx:e}}});return a.$on("click",e.click_handler_1),{c(){t=w("div"),o.$$.fragment.c(),n=b(),a.$$.fragment.c(),_(t,"slot","actions")},m(e,i){l(e,t,i),p(o,t,null),M(t,n),p(a,t,null),s=!0},p(e,t){var n={};e.$$scope&&(n.$$scope={changed:e,ctx:t}),o.$set(n);var s={};e.$$scope&&(s.$$scope={changed:e,ctx:t}),a.$set(s)},i(e){s||(c(o.$$.fragment,e),c(a.$$.fragment,e),s=!0)},o(e){i(o.$$.fragment,e),i(a.$$.fragment,e),s=!1},d(e){e&&r(t),h(o),h(a)}}}function Ge(e){var t,n,s,o;const a=e.$$slots.default,u=L(a,e,null);return{c(){t=b(),n=w("div"),u&&u.c(),s=b(),_(n,"class","tall-dialog svelte-15r4t6p")},l(e){u&&u.l(div_nodes)},m(e,i){l(e,t,i),l(e,n,i),u&&u.m(n,null),l(e,s,i),o=!0},p(e,t){u&&u.p&&e.$$scope&&u.p(x(a,t,e,null),I(a,t,null))},i(e){o||(c(u,e),o=!0)},o(e){i(u,e),o=!1},d(e){e&&(r(t),r(n)),u&&u.d(e),e&&r(s)}}}function Je(e){var t,n;function s(n){e.dialog_value_binding.call(null,n),t=!0,v(()=>t=!1)}let l={$$slots:{default:[Ge],actions:[He],title:[Ve]},$$scope:{ctx:e}};void 0!==e.showModal&&(l.value=e.showModal);var o=new Z({props:l});return $.push(()=>g(o,"value",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};(e.$$scope||e.formTitle)&&(s.$$scope={changed:e,ctx:n}),!t&&e.showModal&&(s.value=n.showModal),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Ke(e,t,n){let{showModal:s=!1}=t;const l=N();let o,{modalSize:i="default",title:a=""}=t,{$$slots:c={},$$scope:r}=t;return e.$set=(e=>{"showModal"in e&&n("showModal",s=e.showModal),"modalSize"in e&&n("modalSize",i=e.modalSize),"title"in e&&n("title",a=e.title),"$$scope"in e&&n("$$scope",r=e.$$scope)}),e.$$.update=((e={title:1})=>{e.title&&n("formTitle",o=a||"&nbsp")}),{showModal:s,dispatch:l,modalSize:i,title:a,formTitle:o,click_handler:function(){return l("close")},click_handler_1:function(){return l("save")},dialog_value_binding:function(e){n("showModal",s=e)},$$slots:c,$$scope:r}}class Qe extends e{constructor(e){super(),t(this,e,Ke,Je,n,["showModal","modalSize","title"])}}var Ue={getList:function(){return te(this,void 0,void 0,function(){var e,t,n,s=this;return ne(this,function(l){switch(l.label){case 0:e=Date.now(),this.$set({loading:!0}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,se.getList(this.path)];case 2:return t=l.sent(),this.$set({list:t}),[3,4];case 3:return n=l.sent(),console.error("getList:",n),[3,4];case 4:return Date.now()-e<500?setTimeout(function(){return s.$set({loading:!1})},500):this.$set({loading:!1}),[2]}})})},add:function(e){e&&e.preventDefault(),this.$set({showModal:!0,selectedItem:{}})},edit:function(e,t){t&&t.preventDefault(),this.$set({showModal:!0,selectedItem:Object.assign({},e)})},save:function(e,t){t&&t.preventDefault();var n=this;if(function(e){var t=e.checkValidity();if(!t)for(var n=0;n<e.length;n++){var s=e[n];s.checkValidity&&(s.checkValidity()||console.log(s.validationMessage),s.setError&&s.setError(s.validationMessage))}return t}(this.form.querySelector("form"))){se.save(this.path,e,function(e){n.close(),n.getList()})}},remove:function(e,t){return te(this,void 0,void 0,function(){return ne(this,function(n){switch(n.label){case 0:return t&&t.preventDefault(),e&&e.id?[4,se.remove(this.path,e)]:[2];case 1:return n.sent(),this.getList(),[2]}})})},close:function(){this.$set({showModal:!1,selectedItem:null})}};function We(e){var t;return{c(){t=d("Add New")},m(e,n){l(e,t,n)},d(e){e&&r(t)}}}function Xe(e){var t,n;function s(n){e.formgrid_item_binding.call(null,n),t=!0,v(()=>t=!1)}let l={columns:e.fielddata};void 0!==e.selectedItem&&(l.item=e.selectedItem);var o=new Fe({props:l});return $.push(()=>g(o,"item",s)),{c(){o.$$.fragment.c()},m(e,t){p(o,e,t),n=!0},p(e,n){var s={};e.fielddata&&(s.columns=n.fielddata),!t&&e.selectedItem&&(s.item=n.selectedItem),o.$set(s)},i(e){n||(c(o.$$.fragment,e),n=!0)},o(e){i(o.$$.fragment,e),n=!1},d(e){h(o,e)}}}function Ye(e){var t,n,s,o,a,u,m,y,k,x,I,C,j,z;function R(t){e.datagrid_rows_binding.call(null,t),u=!0,v(()=>u=!1)}function B(t){e.datagrid_columns_binding.call(null,t),m=!0,v(()=>m=!1)}let L={edit:!1,loading:e.loading};void 0!==e.list&&(L.rows=e.list),void 0!==e.columndata&&(L.columns=e.columndata);var N=new ke({props:L});$.push(()=>g(N,"rows",R)),$.push(()=>g(N,"columns",B));var P=new ee({props:{$$slots:{default:[We]},$$scope:{ctx:e}}});function S(t){e.modal_showModal_binding.call(null,t),j=!0,v(()=>j=!1)}P.$on("click",e.add);let q={title:e.selectedItem?e.selectedItem.name:"",$$slots:{default:[Xe]},$$scope:{ctx:e}};void 0!==e.showModal&&(q.showModal=e.showModal);var T=new Qe({props:q});return $.push(()=>g(T,"showModal",S)),T.$on("close",e.close),T.$on("save",e.save_handler),{c(){t=w("div"),n=w("h4"),s=d(e.title),o=b(),a=w("div"),N.$$.fragment.c(),y=b(),k=w("div"),P.$$.fragment.c(),x=b(),I=w("div"),C=w("div"),T.$$.fragment.c(),_(n,"class","capitalize pb-8"),_(a,"class","py-2"),_(k,"class","py-2"),_(C,"class","form-group")},m(i,c){l(i,t,c),M(t,n),M(n,s),M(t,o),M(t,a),p(N,a,null),M(t,y),M(t,k),p(P,k,null),M(t,x),M(t,I),M(I,C),p(T,C,null),e.div2_binding(C),z=!0},p(e,t){z&&!e.title||f(s,t.title);var n={};e.loading&&(n.loading=t.loading),!u&&e.list&&(n.rows=t.list),!m&&e.columndata&&(n.columns=t.columndata),N.$set(n);var l={};e.$$scope&&(l.$$scope={changed:e,ctx:t}),P.$set(l);var o={};e.selectedItem&&(o.title=t.selectedItem?t.selectedItem.name:""),(e.$$scope||e.fielddata||e.selectedItem)&&(o.$$scope={changed:e,ctx:t}),!j&&e.showModal&&(o.showModal=t.showModal),T.$set(o)},i(e){z||(c(N.$$.fragment,e),c(P.$$.fragment,e),c(T.$$.fragment,e),z=!0)},o(e){i(N.$$.fragment,e),i(P.$$.fragment,e),i(T.$$.fragment,e),z=!1},d(n){n&&r(t),h(N),h(P),h(T),e.div2_binding(null)}}}function Ze(e,t,n){let{title:s="",columndata:l=[],partial:o=null,instance:i=null,list:a=[],showModal:c=!1,selectedItem:r={},path:u="",fielddata:d=[],form:f=null,loading:m=!1}=t,g=!1;const p=Object.assign({},Ue);function h(e,t){p.save.call(i,e,t)}function v(){p.getList.call(i)}return e.$set=(e=>{"title"in e&&n("title",s=e.title),"columndata"in e&&n("columndata",l=e.columndata),"partial"in e&&n("partial",o=e.partial),"instance"in e&&n("instance",i=e.instance),"list"in e&&n("list",a=e.list),"showModal"in e&&n("showModal",c=e.showModal),"selectedItem"in e&&n("selectedItem",r=e.selectedItem),"path"in e&&n("path",u=e.path),"fielddata"in e&&n("fielddata",d=e.fielddata),"form"in e&&n("form",f=e.form),"loading"in e&&n("loading",m=e.loading)}),e.$$.update=((e={path:1,instance:1,initialized:1,partial:1})=>{(e.path||e.instance||e.initialized)&&u&&i&&(g||n("initialized",g=!0)),(e.initialized||e.partial||e.instance)&&g&&o.oncreate(i).then(v)}),{title:s,columndata:l,partial:o,instance:i,list:a,showModal:c,selectedItem:r,path:u,fielddata:d,form:f,loading:m,close:function(){p.close.call(i)},add:function(e){p.add.call(i,e)},save:h,remove:function(e,t){p.remove.call(i,e,t)},edit:function(e,t){p.edit.call(i,e,t)},getList:v,datagrid_rows_binding:function(e){n("list",a=e)},datagrid_columns_binding:function(e){n("columndata",l=e)},formgrid_item_binding:function(e){n("selectedItem",r=e)},modal_showModal_binding:function(e){n("showModal",c=e)},save_handler:function(e){return h(r,e)},div2_binding:function(e){$[e?"unshift":"push"](()=>{n("form",f=e)})}}}export default class extends e{constructor(e){super(),t(this,e,Ze,Ye,n,["title","columndata","partial","instance","list","showModal","selectedItem","path","fielddata","form","loading","close","remove","edit","getList"])}get title(){return this.$$.ctx.title}set title(e){this.$set({title:e}),T()}get columndata(){return this.$$.ctx.columndata}set columndata(e){this.$set({columndata:e}),T()}get partial(){return this.$$.ctx.partial}set partial(e){this.$set({partial:e}),T()}get instance(){return this.$$.ctx.instance}set instance(e){this.$set({instance:e}),T()}get list(){return this.$$.ctx.list}set list(e){this.$set({list:e}),T()}get showModal(){return this.$$.ctx.showModal}set showModal(e){this.$set({showModal:e}),T()}get selectedItem(){return this.$$.ctx.selectedItem}set selectedItem(e){this.$set({selectedItem:e}),T()}get path(){return this.$$.ctx.path}set path(e){this.$set({path:e}),T()}get fielddata(){return this.$$.ctx.fielddata}set fielddata(e){this.$set({fielddata:e}),T()}get form(){return this.$$.ctx.form}set form(e){this.$set({form:e}),T()}get loading(){return this.$$.ctx.loading}set loading(e){this.$set({loading:e}),T()}get close(){return this.$$.ctx.close}get remove(){return this.$$.ctx.remove}get edit(){return this.$$.ctx.edit}get getList(){return this.$$.ctx.getList}}
